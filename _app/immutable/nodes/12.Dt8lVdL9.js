import{s as Xa,n as le,d as _,i as A,l as C,c as p,e as y,h as v,z as In,a as G,b as n,B as An,g as T,f as M,m as L,j as E,t as j,F as Ct,I as wt,v as B,D as qt}from"../chunks/B37NePj7.js";import{S as Nl,i as Dl,d as X,t as V,a as D,m as Q,c as W,b as J,f as xt,g as xe,e as Te}from"../chunks/B835D2GP.js";import{A as Tt}from"../chunks/BO6XNHuD.js";import{m as Vn}from"../chunks/e1TIQ9lZ.js";import{C as Mn,c as jn,b as Ln,d as Me,e as gn,f as zn,I as Fn,R as hn,t as On,g as Gn,h as qn,i as bn,j as Bn,k as Cn,l as Bt,m as wn,n as Un,o as Hn,p as Kn,q as Zn,r as Yn,s as Xn,B as Qn,M as Wn,V as Jn,O as es,P as ts,F as as,u as ls,v as ns,S as ss,w as is,x as os,T as rs,y as fs}from"../chunks/CU7hq96A.js";import"../chunks/CdvI_gxk.js";import{r as Za,s as xn,C as cs,T as ds,a as Ya,D as Nn,P as Il,M as us,b as _s}from"../chunks/DC7HhdAB.js";class ms extends Mn{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=jn(),this.tmpTileRange_=new Ln(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),l=e.getState(),a=t.getUseInterimTilesOnError();return l==Me.LOADED||l==Me.EMPTY||l==Me.ERROR&&!a}getTile(e,t,l,a){const r=a.pixelRatio,f=a.viewState.projection,u=this.getLayer();let o=u.getSource().getTile(e,t,l,r,f);return o.getState()==Me.ERROR&&u.getUseInterimTilesOnError()&&u.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(o)||(o=o.getInterimTile()),o}getData(e){const t=this.frameState;if(!t)return null;const l=this.getLayer(),a=gn(t.pixelToCoordinateTransform,e.slice()),r=l.getExtent();if(r&&!zn(r,a))return null;const f=t.pixelRatio,u=t.viewState.projection,i=t.viewState,o=l.getRenderSource(),c=o.getTileGridForProjection(i.projection),d=o.getTilePixelRatio(t.pixelRatio);for(let h=c.getZForResolution(i.resolution);h>=c.getMinZoom();--h){const g=c.getTileCoordForCoordAndZ(a,h),w=o.getTile(h,g[1],g[2],f,u);if(!(w instanceof Fn||w instanceof hn)||w instanceof hn&&w.getState()===Me.EMPTY)return null;if(w.getState()!==Me.LOADED)continue;const I=c.getOrigin(h),S=On(c.getTileSize(h)),P=c.getResolution(h),m=Math.floor(d*((a[0]-I[0])/P-g[1]*S[0])),b=Math.floor(d*((I[1]-a[1])/P-g[2]*S[1])),$=Math.round(d*o.getGutterForProjection(i.projection));return this.getImageData(w.getImage(),m+$,b+$)}return null}loadedTileCallback(e,t,l){return this.isDrawableTile(l)?super.loadedTileCallback(e,t,l):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const l=e.layerStatesArray[e.layerIndex],a=e.viewState,r=a.projection,f=a.resolution,u=a.center,i=a.rotation,o=e.pixelRatio,c=this.getLayer(),d=c.getSource(),h=d.getRevision(),g=d.getTileGridForProjection(r),w=g.getZForResolution(f,d.zDirection),I=g.getResolution(w);let S=e.extent;const P=e.viewState.resolution,m=d.getTilePixelRatio(o),b=Math.round(Gn(S)/P*o),$=Math.round(qn(S)/P*o),x=l.extent&&bn(l.extent);x&&(S=Bn(S,bn(l.extent)));const z=I*b/2/m,ce=I*$/2/m,de=[u[0]-z,u[1]-ce,u[0]+z,u[1]+ce],ee=g.getTileRangeForExtentAndZ(S,w),ne={};ne[w]={};const Ut=this.createLoadedTileFinder(d,r,ne),Et=this.tmpExtent,Ee=this.tmpTileRange_;this.newTiles_=!1;const Le=i?Cn(a.center,P,i,e.size):void 0;for(let se=ee.minX;se<=ee.maxX;++se)for(let U=ee.minY;U<=ee.maxY;++U){if(i&&!g.tileCoordIntersectsViewport([w,se,U],Le))continue;const q=this.getTile(w,se,U,e);if(this.isDrawableTile(q)){const ve=Bt(this);if(q.getState()==Me.LOADED){ne[w][q.tileCoord.toString()]=q;let ie=q.inTransition(ve);ie&&l.opacity!==1&&(q.endTransition(ve),ie=!1),!this.newTiles_&&(ie||!this.renderedTiles.includes(q))&&(this.newTiles_=!0)}if(q.getAlpha(ve,e.time)===1)continue}const ue=g.getTileCoordChildTileRange(q.tileCoord,Ee,Et);let Se=!1;ue&&(Se=Ut(w+1,ue)),Se||g.forEachTileCoordParentTileRange(q.tileCoord,Ut,Ee,Et)}const $e=I/f*o/m;wn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,i,-b/2,-$/2);const ze=Un(this.pixelTransform);this.useContainer(t,ze,this.getBackground(e));const F=this.getRenderContext(e),te=this.context.canvas;Hn(this.inversePixelTransform,this.pixelTransform),wn(this.tempTransform,b/2,$/2,$e,$e,0,-b/2,-$/2),te.width!=b||te.height!=$?(te.width=b,te.height=$):this.containerReused||F.clearRect(0,0,b,$),x&&this.clipUnrotated(F,e,x),d.getInterpolate()||(F.imageSmoothingEnabled=!1),this.preRender(F,e),this.renderedTiles.length=0;let Pe=Object.keys(ne).map(Number);Pe.sort(Kn);let me,pe,H;l.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?Pe=Pe.reverse():(me=[],pe=[]);for(let se=Pe.length-1;se>=0;--se){const U=Pe[se],q=d.getTilePixelSize(U,o,r),Se=g.getResolution(U)/I,ve=q[0]*Se*$e,ie=q[1]*Se*$e,ye=g.getTileCoordForCoordAndZ(Zn(de),U),Fe=g.getTileCoordExtent(ye),Re=gn(this.tempTransform,[m*(Fe[0]-de[0])/I,m*(de[3]-Fe[3])/I]),ke=m*d.getGutterForProjection(r),ge=ne[U];for(const fa in ge){const he=ge[fa],_e=he.tileCoord,Ie=ye[1]-_e[1],$t=Math.round(Re[0]-(Ie-1)*ve),yt=ye[2]-_e[2],Oe=Math.round(Re[1]-(yt-1)*ie),ae=Math.round(Re[0]-Ie*ve),oe=Math.round(Re[1]-yt*ie),re=$t-ae,fe=Oe-oe,Ht=w===U,kt=Ht&&he.getAlpha(Bt(this),e.time)!==1;let be=!1;if(!kt)if(me){H=[ae,oe,ae+re,oe,ae+re,oe+fe,ae,oe+fe];for(let Ce=0,Pt=me.length;Ce<Pt;++Ce)if(w!==U&&U<pe[Ce]){const K=me[Ce];Yn([ae,oe,ae+re,oe+fe],[K[0],K[3],K[4],K[7]])&&(be||(F.save(),be=!0),F.beginPath(),F.moveTo(H[0],H[1]),F.lineTo(H[2],H[3]),F.lineTo(H[4],H[5]),F.lineTo(H[6],H[7]),F.moveTo(K[6],K[7]),F.lineTo(K[4],K[5]),F.lineTo(K[2],K[3]),F.lineTo(K[0],K[1]),F.clip())}me.push(H),pe.push(U)}else F.clearRect(ae,oe,re,fe);this.drawTileImage(he,e,ae,oe,re,fe,ke,Ht),me&&!kt?(be&&F.restore(),this.renderedTiles.unshift(he)):this.renderedTiles.push(he),this.updateUsedTiles(e.usedTiles,d,he)}}return this.renderedRevision=h,this.renderedResolution=I,this.extentChanged=!this.renderedExtent_||!Xn(this.renderedExtent_,de),this.renderedExtent_=de,this.renderedPixelRatio=o,this.renderedProjection=r,this.manageTilePyramid(e,d,g,o,r,S,w,c.getPreload()),this.scheduleExpireCache(e,d),this.postRender(this.context,e),l.extent&&F.restore(),F.imageSmoothingEnabled=!0,ze!==te.style.transform&&(te.style.transform=ze),this.container}drawTileImage(e,t,l,a,r,f,u,i){const o=this.getTileImage(e);if(!o)return;const c=this.getRenderContext(t),d=Bt(this),h=t.layerStatesArray[t.layerIndex],g=h.opacity*(i?e.getAlpha(d,t.time):1),w=g!==c.globalAlpha;w&&(c.save(),c.globalAlpha=g),c.drawImage(o,u,u,o.width-2*u,o.height-2*u,l,a,r,f),w&&c.restore(),g!==h.opacity?t.animate=!0:i&&e.endTransition(d)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const l=(function(a,r,f){const u=Bt(a);u in f.usedTiles&&a.expireCache(f.viewState.projection,f.usedTiles[u])}).bind(null,t);e.postRenderFunctions.push(l)}}updateUsedTiles(e,t,l){const a=Bt(t);a in e||(e[a]={}),e[a][l.getKey()]=!0}manageTilePyramid(e,t,l,a,r,f,u,i,o){const c=Bt(t);c in e.wantedTiles||(e.wantedTiles[c]={});const d=e.wantedTiles[c],h=e.tileQueue,g=l.getMinZoom(),w=e.viewState.rotation,I=w?Cn(e.viewState.center,e.viewState.resolution,w,e.size):void 0;let S=0,P,m,b,$,x,z;for(z=g;z<=u;++z)for(m=l.getTileRangeForExtentAndZ(f,z,m),b=l.getResolution(z),$=m.minX;$<=m.maxX;++$)for(x=m.minY;x<=m.maxY;++x)w&&!l.tileCoordIntersectsViewport([z,$,x],I)||(u-z<=i?(++S,P=t.getTile(z,$,x,a,r),P.getState()==Me.IDLE&&(d[P.getKey()]=!0,h.isKeyQueued(P.getKey())||h.enqueue([P,c,l.getTileCoordCenter(P.tileCoord),b])),o!==void 0&&o(P)):t.useTile(z,$,x,r));t.updateCacheSize(S,r)}}class ps extends Qn{constructor(e){super(e)}createRenderer(){return new ms(this)}}function vs(s,e,t){let l=t.file.long_name,a=t.file.frequency+"ly",r="None",f=!1,u="None",i="None",o="None",c="None",d="None",h=!1,g="";if(a=="dayly"&&(a="daily"),e.includes("vaal")?r="Vaal":e.includes("kunene")?r="Kunene":e.includes("luanginga")&&(r="Luanginga"),s.includes("_b_")&&(f=!0),e.includes("CORDEX")?(u="Cordex-Core",s.includes("REMO")?o="GERICS-REMO2015":s.includes("KIT")?o="KIT-CCLM5-0-15":s.includes("ICTP")&&(o="ICTP-RegCM4-7"),i=t.driving_model_id):e.includes("CMIP6")?(u="CMIP6",i=t.source_id):e.includes("ERA5")?u="Era5-Land":e.includes("GLEAM")&&(u="GLEAM"),s.includes("yearsum")||s.includes("yearmean")){a="annual aggregated";let w=s.match(/year(?:sum|mean)_(\d{4})_(\d{4})-(\d{4})_(\d{4})/),I=s.match(/year(?:sum|mean)_(\d{4}_\d{4})/);w?(d=`${w[1]}–${w[2]}`,c=`${w[3]}–${w[4]}`):I&&I&&(c=`${I[1]}–${I[2]}`)}if(s.includes("_mean_")){h=!0;let w=s.match(/_mean_(\d{4})_(\d{4})-(\d{4})_(\d{4})/),I=s.match(/_mean_(\d{4})_(\d{4})/);w?(d=`${w[1]}–${w[2]}`,c=`${w[3]}–${w[4]}`):I&&I&&(c=`${I[1]}–${I[2]}`)}return h&&(g+="mean value of "),a!="nonely"&&(g+=a+" data of "),g+=l+" ",u!="None"&&(g+="based on "+u+" ",i!="None"?g+=i+" global model ":g+="dataset ",o!="None"&&(g+="and "+o+" regional model "),f&&(g+="with bias correction "),c!="None"&&(g+="for time period "+c+" "),d!="None"&&(g+="compared to "+d+" "),r!="None"&&(g+="clipped to "+r+" study area ")),g=gs(g),g}function gs(s){return s?(s=s.trimEnd(),s=s.charAt(0).toUpperCase()+s.slice(1),s.endsWith(".")||(s+="."),s):""}function hs(s){let e;return{c(){e=v("div"),this.h()},l(t){e=p(t,"DIV",{id:!0,class:!0}),y(e).forEach(_),this.h()},h(){C(e,"id","map"),C(e,"class","svelte-mjfcf6")},m(t,l){A(t,e,l)},p:le,i:le,o:le,d(t){t&&_(e)}}}function bs(s,e,t){let{extent:l}=e;function a(r,f,u="EPSG:4326"){if(!r||!f||f.length!==4){console.error("Invalid map or extent");return}const[i,o,c,d]=f,h=new ts([[[i,o],[i,d],[c,d],[c,o],[i,o]]]);h.transform(u,r.getView().getProjection());const g=new as(h),w=new ls({features:[g]}),I=new ns({source:w,style:new ss({stroke:new os({color:"rgba(255, 120, 0, 0.8)",width:2}),fill:new is({color:"rgba(255, 120, 0, 0.2)"})})});return r.addLayer(I),r.getView().fit(h,{padding:[20,20,20,20]}),I}return In(()=>{let r=new Wn({target:"map",layers:[new ps({source:new es})],view:new Jn({center:[0,0],zoom:2,projection:"EPSG:3857"})});a(r,l)}),s.$$set=r=>{"extent"in r&&t(0,l=r.extent)},[l,a]}class Cs extends Nl{constructor(e){super(),Dl(this,e,bs,hs,Xa,{extent:0,drawExtentBox:1})}get drawExtentBox(){return this.$$.ctx[1]}}const ws="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M17%2018V21M17%2015H17.01M13%203V7.4C13%207.96005%2013%208.24008%2013.109%208.45399C13.2049%208.64215%2013.3578%208.79513%2013.546%208.89101C13.7599%209%2014.0399%209%2014.6%209H19M13%203H8.2C7.0799%203%206.51984%203%206.09202%203.21799C5.71569%203.40973%205.40973%203.71569%205.21799%204.09202C5%204.51984%205%205.0799%205%206.2V17.8C5%2018.9201%205%2019.4802%205.21799%2019.908C5.40973%2020.2843%205.71569%2020.5903%206.09202%2020.782C6.51984%2021%207.0799%2021%208.2%2021H13M13%203L19%209M19%209V11.5'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e";function Tn(s){let e,t,l="Climatology Bounds Start:",a,r,f=je(s[0].metadata.file.climatology_bounds[0][0])+"",u,i,o,c,d="Climatology Bounds End:",h,g,w=je(s[0].metadata.file.climatology_bounds[0][1])+"",I;return{c(){e=v("div"),t=v("span"),t.textContent=l,a=E(),r=v("span"),u=j(f),i=E(),o=v("div"),c=v("span"),c.textContent=d,h=E(),g=v("span"),I=j(w),this.h()},l(S){e=p(S,"DIV",{});var P=y(e);t=p(P,"SPAN",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-99av7i"&&(t.textContent=l),a=T(P),r=p(P,"SPAN",{class:!0});var m=y(r);u=M(m,f),m.forEach(_),P.forEach(_),i=T(S),o=p(S,"DIV",{});var b=y(o);c=p(b,"SPAN",{class:!0,"data-svelte-h":!0}),L(c)!=="svelte-1gu05yd"&&(c.textContent=d),h=T(b),g=p(b,"SPAN",{class:!0});var $=y(g);I=M($,w),$.forEach(_),b.forEach(_),this.h()},h(){C(t,"class","font-bold ml-4 text-blue-400"),C(r,"class","ml-2"),C(c,"class","font-bold ml-4 text-blue-400"),C(g,"class","ml-2")},m(S,P){A(S,e,P),n(e,t),n(e,a),n(e,r),n(r,u),A(S,i,P),A(S,o,P),n(o,c),n(o,h),n(o,g),n(g,I)},p(S,P){P&1&&f!==(f=je(S[0].metadata.file.climatology_bounds[0][0])+"")&&G(u,f),P&1&&w!==(w=je(S[0].metadata.file.climatology_bounds[0][1])+"")&&G(I,w)},d(S){S&&(_(e),_(i),_(o))}}}function En(s){let e,t,l="Climatology Bounds 1st Period:",a,r,f=je(s[0].metadata.file.climatology_bounds_details[0])+"",u,i,o,c,d="Climatology Bounds 2nd Period:",h,g,w=je(s[0].metadata.file.climatology_bounds_details[1])+"",I;return{c(){e=v("div"),t=v("span"),t.textContent=l,a=E(),r=v("span"),u=j(f),i=E(),o=v("div"),c=v("span"),c.textContent=d,h=E(),g=v("span"),I=j(w),this.h()},l(S){e=p(S,"DIV",{});var P=y(e);t=p(P,"SPAN",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-zha96v"&&(t.textContent=l),a=T(P),r=p(P,"SPAN",{class:!0});var m=y(r);u=M(m,f),m.forEach(_),P.forEach(_),i=T(S),o=p(S,"DIV",{});var b=y(o);c=p(b,"SPAN",{class:!0,"data-svelte-h":!0}),L(c)!=="svelte-1ox1kwb"&&(c.textContent=d),h=T(b),g=p(b,"SPAN",{class:!0});var $=y(g);I=M($,w),$.forEach(_),b.forEach(_),this.h()},h(){C(t,"class","font-bold ml-4 text-blue-400"),C(r,"class","ml-2"),C(c,"class","font-bold ml-4 text-blue-400"),C(g,"class","ml-2")},m(S,P){A(S,e,P),n(e,t),n(e,a),n(e,r),n(r,u),A(S,i,P),A(S,o,P),n(o,c),n(o,h),n(o,g),n(g,I)},p(S,P){P&1&&f!==(f=je(S[0].metadata.file.climatology_bounds_details[0])+"")&&G(u,f),P&1&&w!==(w=je(S[0].metadata.file.climatology_bounds_details[1])+"")&&G(I,w)},d(S){S&&(_(e),_(i),_(o))}}}function xs(s){let e,t="Other Metadata";return{c(){e=v("span"),e.textContent=t},l(l){e=p(l,"SPAN",{"data-svelte-h":!0}),L(e)!=="svelte-14jvd71"&&(e.textContent=t)},m(l,a){A(l,e,a)},p:le,d(l){l&&_(e)}}}function Ts(s){let e;return{c(){e=j("Related Datasets")},l(t){e=M(t,"Related Datasets")},m(t,l){A(t,e,l)},d(t){t&&_(e)}}}function Es(s){let e;return{c(){e=j("Provenance")},l(t){e=M(t,"Provenance")},m(t,l){A(t,e,l)},d(t){t&&_(e)}}}function $n(s){let e,t,l;function a(f){s[14](f)}let r={name:"tab4",value:3,$$slots:{default:[$s]},$$scope:{ctx:s}};return s[4]!==void 0&&(r.group=s[4]),e=new Ya({props:r}),Ct.push(()=>xt(e,"group",a)),{c(){J(e.$$.fragment)},l(f){W(e.$$.fragment,f)},m(f,u){Q(e,f,u),l=!0},p(f,u){const i={};u&32768&&(i.$$scope={dirty:u,ctx:f}),!t&&u&16&&(t=!0,i.group=f[4],wt(()=>t=!1)),e.$set(i)},i(f){l||(D(e.$$.fragment,f),l=!0)},o(f){V(e.$$.fragment,f),l=!1},d(f){X(e,f)}}}function $s(s){let e;return{c(){e=j("Map")},l(t){e=M(t,"Map")},m(t,l){A(t,e,l)},d(t){t&&_(e)}}}function ys(s){let e,t,l,a,r,f,u,i,o,c,d;function h(b){s[11](b)}let g={name:"tab1",value:0,$$slots:{default:[xs]},$$scope:{ctx:s}};s[4]!==void 0&&(g.group=s[4]),e=new Ya({props:g}),Ct.push(()=>xt(e,"group",h));function w(b){s[12](b)}let I={name:"tab1",value:1,$$slots:{default:[Ts]},$$scope:{ctx:s}};s[4]!==void 0&&(I.group=s[4]),a=new Ya({props:I}),Ct.push(()=>xt(a,"group",w));function S(b){s[13](b)}let P={name:"tab2",value:2,$$slots:{default:[Es]},$$scope:{ctx:s}};s[4]!==void 0&&(P.group=s[4]),u=new Ya({props:P}),Ct.push(()=>xt(u,"group",S));let m=s[0].tif_convertable&&$n(s);return{c(){J(e.$$.fragment),l=E(),J(a.$$.fragment),f=E(),J(u.$$.fragment),o=E(),m&&m.c(),c=B()},l(b){W(e.$$.fragment,b),l=T(b),W(a.$$.fragment,b),f=T(b),W(u.$$.fragment,b),o=T(b),m&&m.l(b),c=B()},m(b,$){Q(e,b,$),A(b,l,$),Q(a,b,$),A(b,f,$),Q(u,b,$),A(b,o,$),m&&m.m(b,$),A(b,c,$),d=!0},p(b,$){const x={};$&32768&&(x.$$scope={dirty:$,ctx:b}),!t&&$&16&&(t=!0,x.group=b[4],wt(()=>t=!1)),e.$set(x);const z={};$&32768&&(z.$$scope={dirty:$,ctx:b}),!r&&$&16&&(r=!0,z.group=b[4],wt(()=>r=!1)),a.$set(z);const ce={};$&32768&&(ce.$$scope={dirty:$,ctx:b}),!i&&$&16&&(i=!0,ce.group=b[4],wt(()=>i=!1)),u.$set(ce),b[0].tif_convertable?m?(m.p(b,$),$&1&&D(m,1)):(m=$n(b),m.c(),D(m,1),m.m(c.parentNode,c)):m&&(xe(),V(m,1,1,()=>{m=null}),Te())},i(b){d||(D(e.$$.fragment,b),D(a.$$.fragment,b),D(u.$$.fragment,b),D(m),d=!0)},o(b){V(e.$$.fragment,b),V(a.$$.fragment,b),V(u.$$.fragment,b),V(m),d=!1},d(b){b&&(_(l),_(f),_(o),_(c)),X(e,b),X(a,b),X(u,b),m&&m.d(b)}}}function ks(s){let e,t,l=s[5]&&s[5]!=""&&yn(s);return{c(){l&&l.c(),e=B()},l(a){l&&l.l(a),e=B()},m(a,r){l&&l.m(a,r),A(a,e,r),t=!0},p(a,r){a[5]&&a[5]!=""?l?(l.p(a,r),r&32&&D(l,1)):(l=yn(a),l.c(),D(l,1),l.m(e.parentNode,e)):l&&(xe(),V(l,1,1,()=>{l=null}),Te())},i(a){t||(D(l),t=!0)},o(a){V(l),t=!1},d(a){a&&_(e),l&&l.d(a)}}}function Ps(s){let e,t,l,a;const r=[Ns,Is],f=[];function u(i,o){return i[0].metadata_prov_exists&&i[0].metadata_show?0:1}return e=u(s),t=f[e]=r[e](s),{c(){t.c(),l=B()},l(i){t.l(i),l=B()},m(i,o){f[e].m(i,o),A(i,l,o),a=!0},p(i,o){let c=e;e=u(i),e===c?f[e].p(i,o):(xe(),V(f[c],1,1,()=>{f[c]=null}),Te(),t=f[e],t?t.p(i,o):(t=f[e]=r[e](i),t.c()),D(t,1),t.m(l.parentNode,l))},i(i){a||(D(t),a=!0)},o(i){V(t),a=!1},d(i){i&&_(l),f[e].d(i)}}}function Ss(s){let e,t,l,a;const r=[As,Ds],f=[];function u(i,o){return i[0].metadata_prov_stats?0:1}return e=u(s),t=f[e]=r[e](s),{c(){t.c(),l=B()},l(i){t.l(i),l=B()},m(i,o){f[e].m(i,o),A(i,l,o),a=!0},p(i,o){let c=e;e=u(i),e===c?f[e].p(i,o):(xe(),V(f[c],1,1,()=>{f[c]=null}),Te(),t=f[e],t?t.p(i,o):(t=f[e]=r[e](i),t.c()),D(t,1),t.m(l.parentNode,l))},i(i){a||(D(t),a=!0)},o(i){V(t),a=!1},d(i){i&&_(l),f[e].d(i)}}}function Rs(s){let e,t,l,a;const r=[Ms,Vs],f=[];function u(i,o){return i[0].metadata_exists?0:1}return e=u(s),t=f[e]=r[e](s),{c(){t.c(),l=B()},l(i){t.l(i),l=B()},m(i,o){f[e].m(i,o),A(i,l,o),a=!0},p(i,o){let c=e;e=u(i),e===c?f[e].p(i,o):(xe(),V(f[c],1,1,()=>{f[c]=null}),Te(),t=f[e],t?t.p(i,o):(t=f[e]=r[e](i),t.c()),D(t,1),t.m(l.parentNode,l))},i(i){a||(D(t),a=!0)},o(i){V(t),a=!1},d(i){i&&_(l),f[e].d(i)}}}function yn(s){let e=s[5],t,l,a=kn(s);return{c(){a.c(),t=B()},l(r){a.l(r),t=B()},m(r,f){a.m(r,f),A(r,t,f),l=!0},p(r,f){f&32&&Xa(e,e=r[5])?(xe(),V(a,1,1,le),Te(),a=kn(r),a.c(),D(a,1),a.m(t.parentNode,t)):a.p(r,f)},i(r){l||(D(a),l=!0)},o(r){V(a),l=!1},d(r){r&&_(t),a.d(r)}}}function kn(s){let e,t,l;function a(f){s[10](f)}let r={foldertype:s[1],show_varinfos:!1};return s[5]!==void 0&&(r.selected_file=s[5]),e=new rs({props:r}),Ct.push(()=>xt(e,"selected_file",a)),{c(){J(e.$$.fragment)},l(f){W(e.$$.fragment,f)},m(f,u){Q(e,f,u),l=!0},p(f,u){const i={};u&2&&(i.foldertype=f[1]),!t&&u&32&&(t=!0,i.selected_file=f[5],wt(()=>t=!1)),e.$set(i)},i(f){l||(D(e.$$.fragment,f),l=!0)},o(f){V(e.$$.fragment,f),l=!1},d(f){X(e,f)}}}function Is(s){let e;return{c(){e=j("currently no provenance data available")},l(t){e=M(t,"currently no provenance data available")},m(t,l){A(t,e,l)},p:le,i:le,o:le,d(t){t&&_(e)}}}function Ns(s){let e,t,l,a,r,f="provenance",u,i,o,c;l=new Nn({});let d=s[0].metadata_prov_stats&&Pn(s);return{c(){e=v("button"),t=v("a"),J(l.$$.fragment),a=E(),r=v("div"),r.textContent=f,i=E(),d&&d.c(),o=B(),this.h()},l(h){e=p(h,"BUTTON",{class:!0});var g=y(e);t=p(g,"A",{href:!0,class:!0,title:!0});var w=y(t);W(l.$$.fragment,w),a=T(w),r=p(w,"DIV",{class:!0,"data-svelte-h":!0}),L(r)!=="svelte-19tiklx"&&(r.textContent=f),w.forEach(_),g.forEach(_),i=T(h),d&&d.l(h),o=B(),this.h()},h(){C(r,"class","ml-1 flex place-items-center justify-items-center"),C(t,"href",u=Tt+"/climate/get_temp_file?name="+s[0].filename+"&type="+s[1]+"&filetype=prov"),C(t,"class","flex"),C(t,"title","Download metadata file"),C(e,"class","ml-2 mr-1 max-h-[33px] p-1 flex items-center justify-center variant-filled-tertiary hover:bg-tertiary-900 rounded-md")},m(h,g){A(h,e,g),n(e,t),Q(l,t,null),n(t,a),n(t,r),A(h,i,g),d&&d.m(h,g),A(h,o,g),c=!0},p(h,g){(!c||g&3&&u!==(u=Tt+"/climate/get_temp_file?name="+h[0].filename+"&type="+h[1]+"&filetype=prov"))&&C(t,"href",u),h[0].metadata_prov_stats?d?(d.p(h,g),g&1&&D(d,1)):(d=Pn(h),d.c(),D(d,1),d.m(o.parentNode,o)):d&&(xe(),V(d,1,1,()=>{d=null}),Te())},i(h){c||(D(l.$$.fragment,h),D(d),c=!0)},o(h){V(l.$$.fragment,h),V(d),c=!1},d(h){h&&(_(e),_(i),_(o)),X(l),d&&d.d(h)}}}function Pn(s){let e,t,l,a;function r(i){s[8](i)}function f(i){s[9](i)}let u={in_main_page:s[2]};return s[0].metadata_prov!==void 0&&(u.metadata_prov=s[0].metadata_prov),s[0].metadata_prov_stats!==void 0&&(u.metadata_prov_stats=s[0].metadata_prov_stats),e=new _s({props:u}),Ct.push(()=>xt(e,"metadata_prov",r)),Ct.push(()=>xt(e,"metadata_prov_stats",f)),{c(){J(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,o){Q(e,i,o),a=!0},p(i,o){const c={};o&4&&(c.in_main_page=i[2]),!t&&o&1&&(t=!0,c.metadata_prov=i[0].metadata_prov,wt(()=>t=!1)),!l&&o&1&&(l=!0,c.metadata_prov_stats=i[0].metadata_prov_stats,wt(()=>l=!1)),e.$set(c)},i(i){a||(D(e.$$.fragment,i),a=!0)},o(i){V(e.$$.fragment,i),a=!1},d(i){X(e,i)}}}function Ds(s){let e;return{c(){e=j("currently no related datasets available")},l(t){e=M(t,"currently no related datasets available")},m(t,l){A(t,e,l)},p:le,i:le,o:le,d(t){t&&_(e)}}}function As(s){var I,S,P;let e,t,l="ℹ️ Available files based on this file",a,r,f,u,i,o="ℹ️ Available files used to create this file",c,d,h,g,w;return r=new Il({props:{data:(I=s[0].metadata_prov_stats)==null?void 0:I.base_for_entities,only_links:!0,in_main_page:s[2]}}),d=new Il({props:{data:(S=s[0].metadata_prov_stats)==null?void 0:S.source_entities,only_links:!0,in_main_page:s[2]}}),g=new Il({props:{data:(P=s[0].metadata_prov_stats)==null?void 0:P.result_entities,only_links:!0,in_main_page:s[2]}}),{c(){e=v("div"),t=v("h2"),t.textContent=l,a=E(),J(r.$$.fragment),f=E(),u=v("div"),i=v("h2"),i.textContent=o,c=E(),J(d.$$.fragment),h=E(),J(g.$$.fragment),this.h()},l(m){e=p(m,"DIV",{class:!0,id:!0});var b=y(e);t=p(b,"H2",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-1yf5jay"&&(t.textContent=l),a=T(b),W(r.$$.fragment,b),b.forEach(_),f=T(m),u=p(m,"DIV",{class:!0,id:!0});var $=y(u);i=p($,"H2",{class:!0,"data-svelte-h":!0}),L(i)!=="svelte-1161htc"&&(i.textContent=o),c=T($),W(d.$$.fragment,$),h=T($),W(g.$$.fragment,$),$.forEach(_),this.h()},h(){C(t,"class","text-lg font-semibold mb-3 flex items-center gap-2 text-white"),C(e,"class","bg-box svelte-lnuuuk"),C(e,"id","base_for_entities_"+s[6]),C(i,"class","text-lg font-semibold mb-3 flex items-center gap-2 text-white"),C(u,"class","bg-box svelte-lnuuuk"),C(u,"id","base_for_entities_"+s[6])},m(m,b){A(m,e,b),n(e,t),n(e,a),Q(r,e,null),A(m,f,b),A(m,u,b),n(u,i),n(u,c),Q(d,u,null),n(u,h),Q(g,u,null),w=!0},p(m,b){var ce,de,ee;const $={};b&1&&($.data=(ce=m[0].metadata_prov_stats)==null?void 0:ce.base_for_entities),b&4&&($.in_main_page=m[2]),r.$set($);const x={};b&1&&(x.data=(de=m[0].metadata_prov_stats)==null?void 0:de.source_entities),b&4&&(x.in_main_page=m[2]),d.$set(x);const z={};b&1&&(z.data=(ee=m[0].metadata_prov_stats)==null?void 0:ee.result_entities),b&4&&(z.in_main_page=m[2]),g.$set(z)},i(m){w||(D(r.$$.fragment,m),D(d.$$.fragment,m),D(g.$$.fragment,m),w=!0)},o(m){V(r.$$.fragment,m),V(d.$$.fragment,m),V(g.$$.fragment,m),w=!1},d(m){m&&(_(e),_(f),_(u)),X(r),X(d),X(g)}}}function Vs(s){let e;return{c(){e=j("currently no metadata available")},l(t){e=M(t,"currently no metadata available")},m(t,l){A(t,e,l)},p:le,i:le,o:le,d(t){t&&_(e)}}}function Ms(s){let e,t,l,a,r,f="metadata",u,i,o,c;l=new Nn({});let d=s[0].metadata&&s[0].metadata_show&&Sn(s);return{c(){e=v("button"),t=v("a"),J(l.$$.fragment),a=E(),r=v("div"),r.textContent=f,i=E(),d&&d.c(),o=B(),this.h()},l(h){e=p(h,"BUTTON",{class:!0});var g=y(e);t=p(g,"A",{href:!0,class:!0,title:!0});var w=y(t);W(l.$$.fragment,w),a=T(w),r=p(w,"DIV",{class:!0,"data-svelte-h":!0}),L(r)!=="svelte-xp3lgr"&&(r.textContent=f),w.forEach(_),g.forEach(_),i=T(h),d&&d.l(h),o=B(),this.h()},h(){C(r,"class","ml-1 flex place-items-center justify-items-center"),C(t,"href",u=Tt+"/climate/get_temp_file?name="+s[0].filename+"&type="+s[1]+"&filetype=meta"),C(t,"class","flex"),C(t,"title","Download metadata file"),C(e,"class","ml-2 mr-1 max-h-[33px] p-1 flex items-center justify-center variant-filled-tertiary hover:bg-tertiary-900 rounded-md")},m(h,g){A(h,e,g),n(e,t),Q(l,t,null),n(t,a),n(t,r),A(h,i,g),d&&d.m(h,g),A(h,o,g),c=!0},p(h,g){(!c||g&3&&u!==(u=Tt+"/climate/get_temp_file?name="+h[0].filename+"&type="+h[1]+"&filetype=meta"))&&C(t,"href",u),h[0].metadata&&h[0].metadata_show?d?(d.p(h,g),g&1&&D(d,1)):(d=Sn(h),d.c(),D(d,1),d.m(o.parentNode,o)):d&&(xe(),V(d,1,1,()=>{d=null}),Te())},i(h){c||(D(l.$$.fragment,h),D(d),c=!0)},o(h){V(l.$$.fragment,h),V(d),c=!1},d(h){h&&(_(e),_(i),_(o)),X(l),d&&d.d(h)}}}function Sn(s){let e,t;return e=new us({props:{data:s[0].metadata,in_main_page:s[2]}}),{c(){J(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,a){Q(e,l,a),t=!0},p(l,a){const r={};a&1&&(r.data=l[0].metadata),a&4&&(r.in_main_page=l[2]),e.$set(r)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function js(s){let e,t,l,a;const r=[Rs,Ss,Ps,ks],f=[];function u(i,o){return i[4]===0?0:i[4]===1?1:i[4]===2?2:i[4]===3?3:-1}return~(e=u(s))&&(t=f[e]=r[e](s)),{c(){t&&t.c(),l=B()},l(i){t&&t.l(i),l=B()},m(i,o){~e&&f[e].m(i,o),A(i,l,o),a=!0},p(i,o){let c=e;e=u(i),e===c?~e&&f[e].p(i,o):(t&&(xe(),V(f[c],1,1,()=>{f[c]=null}),Te()),~e?(t=f[e],t?t.p(i,o):(t=f[e]=r[e](i),t.c()),D(t,1),t.m(l.parentNode,l)):t=null)},i(i){a||(D(t),a=!0)},o(i){V(t),a=!1},d(i){i&&_(l),~e&&f[e].d(i)}}}function Ls(s){let e,t,l,a,r,f,u,i,o=s[0].filename+"",c,d,h,g,w,I,S,P,m,b,$,x,z,ce="Variable",de,ee,ne,Ut="Short Name:",Et,Ee,Le=s[0].metadata.file.short_variable_name+"",$e,ze,F,te,Pe="Long Name:",me,pe,H=s[0].metadata.file.long_name+"",se,U,q,ue,Se="Unit:",ve,ie,ye=s[0].metadata.file.unit+"",Fe,Re,ke,ge,fa="Global Min / Max:",he,_e,Ie=Za(s[0].metadata.file.global_min,2)+"",$t,yt,Oe=Za(s[0].metadata.file.global_max,2)+"",ae,oe,re,fe,Ht="Experiment ID:",kt,be,Ce=s[0].metadata.file.experiment_id+"",Pt,K,Ge,qe,Al="Bias Correction:",Qa,St,Kt=s[0].metadata.file.bias_correction+"",ca,Wa,Be,Ue,Vl="Indicator:",Ja,Rt,Zt=s[0].metadata.file.indicator+"",da,el,He,Ml="Spatial",tl,Ke,Ze,jl="Resolution:",al,It,Yt=s[0].metadata.file.nominal_resolution+"",ua,ll,Ye,Ll="Time",nl,Xe,Qe,zl="Coverage:",sl,Ne,Xt=s[0].metadata.file.time_coverage_start+"",_a,il,Qt=s[0].metadata.file.time_coverage_end+"",ma,ol,We,Je,Fl="Frequency:",rl,Nt,Wt=s[0].metadata.file.frequency+"",pa,fl,et,tt,Ol="Number of time steps:",cl,Dt,Jt=s[0].metadata.file.num_time_steps+"",va,dl,at,lt,Gl="Units:",ul,At,ea=s[0].metadata.file.time_units+"",ga,_l,nt,st,ql="Calendar:",ml,Vt,ta=s[0].metadata.file.time_calendar+"",ha,pl,it,ot,Bl="Resolution sfsfsdf:",vl,Mt,aa=s[0].metadata.file.nominal_resolution+"",ba,gl,Ca,wa,rt,Ul="File",hl,ft,ct,Hl="Format:",bl,jt,la=s[0].metadata.file.file_format+"",xa,Cl,dt,ut,Kl="Size:",wl,Lt,na=xn(s[0].metadata.file.file_size)+"",Ta,xl,_t,mt,Zl="Created:",Tl,zt,sa=s[0].metadata.file.birth_time+"",Ea,El,pt,vt,Yl="Last Modified:",$l,Ft,ia=s[0].metadata.file.last_modification_time+"",$a,yl,we,De,kl,gt,Xl="ℹ️ Cite as:",Pl,Ot,Ql='<span class="font-bold text-blue-400">Reference:</span> <span>coming soon</span>',Sl,Ae,Rl,oa,ya,Ve,O,Z=s[0].metadata.file.climatology_bounds&&Tn(s),Y=s[0].metadata.file.climatology_bounds_details&&En(s);return De=new Cs({props:{extent:[s[0].metadata.file.geospatial_lon_min,s[0].metadata.file.geospatial_lat_min,s[0].metadata.file.geospatial_lon_max,s[0].metadata.file.geospatial_lat_max]}}),Ae=new cs({props:{file:s[0].metadata.file,in_main_page:!1}}),Ve=new ds({props:{$$slots:{panel:[js],default:[ys]},$$scope:{ctx:s}}}),{c(){e=v("br"),t=E(),l=v("div"),a=v("div"),r=v("h2"),f=v("img"),i=E(),c=j(o),d=E(),h=v("a"),g=j("Collection View"),I=E(),S=v("div"),P=v("span"),m=j(s[3]),b=E(),$=v("div"),x=v("div"),z=v("div"),z.textContent=ce,de=E(),ee=v("div"),ne=v("span"),ne.textContent=Ut,Et=E(),Ee=v("span"),$e=j(Le),ze=E(),F=v("div"),te=v("span"),te.textContent=Pe,me=E(),pe=v("span"),se=j(H),U=E(),q=v("div"),ue=v("span"),ue.textContent=Se,ve=E(),ie=v("span"),Fe=j(ye),Re=E(),ke=v("div"),ge=v("span"),ge.textContent=fa,he=E(),_e=v("span"),$t=j(Ie),yt=j(" / "),ae=j(Oe),oe=E(),re=v("div"),fe=v("span"),fe.textContent=Ht,kt=E(),be=v("span"),Pt=j(Ce),K=E(),Ge=v("div"),qe=v("span"),qe.textContent=Al,Qa=E(),St=v("span"),ca=j(Kt),Wa=E(),Be=v("div"),Ue=v("span"),Ue.textContent=Vl,Ja=E(),Rt=v("span"),da=j(Zt),el=E(),He=v("div"),He.textContent=Ml,tl=E(),Ke=v("div"),Ze=v("span"),Ze.textContent=jl,al=E(),It=v("span"),ua=j(Yt),ll=E(),Ye=v("div"),Ye.textContent=Ll,nl=E(),Xe=v("div"),Qe=v("span"),Qe.textContent=zl,sl=E(),Ne=v("span"),_a=j(Xt),il=j(" - "),ma=j(Qt),ol=E(),We=v("div"),Je=v("span"),Je.textContent=Fl,rl=E(),Nt=v("span"),pa=j(Wt),fl=E(),et=v("div"),tt=v("span"),tt.textContent=Ol,cl=E(),Dt=v("span"),va=j(Jt),dl=E(),at=v("div"),lt=v("span"),lt.textContent=Gl,ul=E(),At=v("span"),ga=j(ea),_l=E(),nt=v("div"),st=v("span"),st.textContent=ql,ml=E(),Vt=v("span"),ha=j(ta),pl=E(),it=v("div"),ot=v("span"),ot.textContent=Bl,vl=E(),Mt=v("span"),ba=j(aa),gl=E(),Z&&Z.c(),Ca=E(),Y&&Y.c(),wa=E(),rt=v("div"),rt.textContent=Ul,hl=E(),ft=v("div"),ct=v("span"),ct.textContent=Hl,bl=E(),jt=v("span"),xa=j(la),Cl=E(),dt=v("div"),ut=v("span"),ut.textContent=Kl,wl=E(),Lt=v("span"),Ta=j(na),xl=E(),_t=v("div"),mt=v("span"),mt.textContent=Zl,Tl=E(),zt=v("span"),Ea=j(sa),El=E(),pt=v("div"),vt=v("span"),vt.textContent=Yl,$l=E(),Ft=v("span"),$a=j(ia),yl=E(),we=v("div"),J(De.$$.fragment),kl=E(),gt=v("h2"),gt.textContent=Xl,Pl=E(),Ot=v("div"),Ot.innerHTML=Ql,Sl=E(),J(Ae.$$.fragment),Rl=E(),oa=v("div"),ya=E(),J(Ve.$$.fragment),this.h()},l(k){e=p(k,"BR",{}),t=T(k),l=p(k,"DIV",{class:!0});var N=y(l);a=p(N,"DIV",{class:!0});var ht=y(a);r=p(ht,"H2",{class:!0});var bt=y(r);f=p(bt,"IMG",{src:!0,alt:!0,width:!0}),i=T(bt),c=M(bt,o),bt.forEach(_),d=T(ht),h=p(ht,"A",{href:!0,class:!0});var ra=y(h);g=M(ra,"Collection View"),ra.forEach(_),ht.forEach(_),I=T(N),S=p(N,"DIV",{class:!0});var Wl=y(S);P=p(Wl,"SPAN",{class:!0});var Jl=y(P);m=M(Jl,s[3]),Jl.forEach(_),Wl.forEach(_),b=T(N),$=p(N,"DIV",{class:!0});var ka=y($);x=p(ka,"DIV",{class:!0});var R=y(x);z=p(R,"DIV",{class:!0,"data-svelte-h":!0}),L(z)!=="svelte-1qkel0h"&&(z.textContent=ce),de=T(R),ee=p(R,"DIV",{});var Pa=y(ee);ne=p(Pa,"SPAN",{class:!0,"data-svelte-h":!0}),L(ne)!=="svelte-1jfkrui"&&(ne.textContent=Ut),Et=T(Pa),Ee=p(Pa,"SPAN",{class:!0});var en=y(Ee);$e=M(en,Le),en.forEach(_),Pa.forEach(_),ze=T(R),F=p(R,"DIV",{});var Sa=y(F);te=p(Sa,"SPAN",{class:!0,"data-svelte-h":!0}),L(te)!=="svelte-95x5vo"&&(te.textContent=Pe),me=T(Sa),pe=p(Sa,"SPAN",{class:!0});var tn=y(pe);se=M(tn,H),tn.forEach(_),Sa.forEach(_),U=T(R),q=p(R,"DIV",{});var Ra=y(q);ue=p(Ra,"SPAN",{class:!0,"data-svelte-h":!0}),L(ue)!=="svelte-1riumd7"&&(ue.textContent=Se),ve=T(Ra),ie=p(Ra,"SPAN",{class:!0});var an=y(ie);Fe=M(an,ye),an.forEach(_),Ra.forEach(_),Re=T(R),ke=p(R,"DIV",{});var Ia=y(ke);ge=p(Ia,"SPAN",{class:!0,"data-svelte-h":!0}),L(ge)!=="svelte-v1003d"&&(ge.textContent=fa),he=T(Ia),_e=p(Ia,"SPAN",{class:!0});var Na=y(_e);$t=M(Na,Ie),yt=M(Na," / "),ae=M(Na,Oe),Na.forEach(_),Ia.forEach(_),oe=T(R),re=p(R,"DIV",{});var Da=y(re);fe=p(Da,"SPAN",{class:!0,"data-svelte-h":!0}),L(fe)!=="svelte-1aemhv1"&&(fe.textContent=Ht),kt=T(Da),be=p(Da,"SPAN",{class:!0});var ln=y(be);Pt=M(ln,Ce),ln.forEach(_),Da.forEach(_),K=T(R),Ge=p(R,"DIV",{});var Aa=y(Ge);qe=p(Aa,"SPAN",{class:!0,"data-svelte-h":!0}),L(qe)!=="svelte-yu4sta"&&(qe.textContent=Al),Qa=T(Aa),St=p(Aa,"SPAN",{class:!0});var nn=y(St);ca=M(nn,Kt),nn.forEach(_),Aa.forEach(_),Wa=T(R),Be=p(R,"DIV",{});var Va=y(Be);Ue=p(Va,"SPAN",{class:!0,"data-svelte-h":!0}),L(Ue)!=="svelte-18t9erc"&&(Ue.textContent=Vl),Ja=T(Va),Rt=p(Va,"SPAN",{class:!0});var sn=y(Rt);da=M(sn,Zt),sn.forEach(_),Va.forEach(_),el=T(R),He=p(R,"DIV",{class:!0,"data-svelte-h":!0}),L(He)!=="svelte-nmsyi9"&&(He.textContent=Ml),tl=T(R),Ke=p(R,"DIV",{});var Ma=y(Ke);Ze=p(Ma,"SPAN",{class:!0,"data-svelte-h":!0}),L(Ze)!=="svelte-1si6ldz"&&(Ze.textContent=jl),al=T(Ma),It=p(Ma,"SPAN",{class:!0});var on=y(It);ua=M(on,Yt),on.forEach(_),Ma.forEach(_),ll=T(R),Ye=p(R,"DIV",{class:!0,"data-svelte-h":!0}),L(Ye)!=="svelte-1hwy0rm"&&(Ye.textContent=Ll),nl=T(R),Xe=p(R,"DIV",{});var ja=y(Xe);Qe=p(ja,"SPAN",{class:!0,"data-svelte-h":!0}),L(Qe)!=="svelte-q5fozz"&&(Qe.textContent=zl),sl=T(ja),Ne=p(ja,"SPAN",{class:!0});var La=y(Ne);_a=M(La,Xt),il=M(La," - "),ma=M(La,Qt),La.forEach(_),ja.forEach(_),ol=T(R),We=p(R,"DIV",{});var za=y(We);Je=p(za,"SPAN",{class:!0,"data-svelte-h":!0}),L(Je)!=="svelte-pubmin"&&(Je.textContent=Fl),rl=T(za),Nt=p(za,"SPAN",{class:!0});var rn=y(Nt);pa=M(rn,Wt),rn.forEach(_),za.forEach(_),fl=T(R),et=p(R,"DIV",{});var Fa=y(et);tt=p(Fa,"SPAN",{class:!0,"data-svelte-h":!0}),L(tt)!=="svelte-1ckaxst"&&(tt.textContent=Ol),cl=T(Fa),Dt=p(Fa,"SPAN",{class:!0});var fn=y(Dt);va=M(fn,Jt),fn.forEach(_),Fa.forEach(_),dl=T(R),at=p(R,"DIV",{});var Oa=y(at);lt=p(Oa,"SPAN",{class:!0,"data-svelte-h":!0}),L(lt)!=="svelte-1ofm2ee"&&(lt.textContent=Gl),ul=T(Oa),At=p(Oa,"SPAN",{class:!0});var cn=y(At);ga=M(cn,ea),cn.forEach(_),Oa.forEach(_),_l=T(R),nt=p(R,"DIV",{});var Ga=y(nt);st=p(Ga,"SPAN",{class:!0,"data-svelte-h":!0}),L(st)!=="svelte-1r37iff"&&(st.textContent=ql),ml=T(Ga),Vt=p(Ga,"SPAN",{class:!0});var dn=y(Vt);ha=M(dn,ta),dn.forEach(_),Ga.forEach(_),pl=T(R),it=p(R,"DIV",{});var qa=y(it);ot=p(qa,"SPAN",{class:!0,"data-svelte-h":!0}),L(ot)!=="svelte-pbrzny"&&(ot.textContent=Bl),vl=T(qa),Mt=p(qa,"SPAN",{class:!0});var un=y(Mt);ba=M(un,aa),un.forEach(_),qa.forEach(_),gl=T(R),Z&&Z.l(R),Ca=T(R),Y&&Y.l(R),wa=T(R),rt=p(R,"DIV",{class:!0,"data-svelte-h":!0}),L(rt)!=="svelte-147jlv5"&&(rt.textContent=Ul),hl=T(R),ft=p(R,"DIV",{});var Ba=y(ft);ct=p(Ba,"SPAN",{class:!0,"data-svelte-h":!0}),L(ct)!=="svelte-1g3bwdk"&&(ct.textContent=Hl),bl=T(Ba),jt=p(Ba,"SPAN",{class:!0});var _n=y(jt);xa=M(_n,la),_n.forEach(_),Ba.forEach(_),Cl=T(R),dt=p(R,"DIV",{});var Ua=y(dt);ut=p(Ua,"SPAN",{class:!0,"data-svelte-h":!0}),L(ut)!=="svelte-1s8sufe"&&(ut.textContent=Kl),wl=T(Ua),Lt=p(Ua,"SPAN",{class:!0});var mn=y(Lt);Ta=M(mn,na),mn.forEach(_),Ua.forEach(_),xl=T(R),_t=p(R,"DIV",{});var Ha=y(_t);mt=p(Ha,"SPAN",{class:!0,"data-svelte-h":!0}),L(mt)!=="svelte-18jov5"&&(mt.textContent=Zl),Tl=T(Ha),zt=p(Ha,"SPAN",{class:!0});var pn=y(zt);Ea=M(pn,sa),pn.forEach(_),Ha.forEach(_),El=T(R),pt=p(R,"DIV",{});var Ka=y(pt);vt=p(Ka,"SPAN",{class:!0,"data-svelte-h":!0}),L(vt)!=="svelte-jq7tld"&&(vt.textContent=Yl),$l=T(Ka),Ft=p(Ka,"SPAN",{class:!0});var vn=y(Ft);$a=M(vn,ia),vn.forEach(_),Ka.forEach(_),R.forEach(_),yl=T(ka),we=p(ka,"DIV",{class:!0});var Gt=y(we);W(De.$$.fragment,Gt),kl=T(Gt),gt=p(Gt,"H2",{class:!0,"data-svelte-h":!0}),L(gt)!=="svelte-1fwzv4e"&&(gt.textContent=Xl),Pl=T(Gt),Ot=p(Gt,"DIV",{"data-svelte-h":!0}),L(Ot)!=="svelte-obsn1f"&&(Ot.innerHTML=Ql),Gt.forEach(_),ka.forEach(_),Sl=T(N),W(Ae.$$.fragment,N),Rl=T(N),oa=p(N,"DIV",{class:!0}),y(oa).forEach(_),N.forEach(_),ya=T(k),W(Ve.$$.fragment,k),this.h()},h(){An(f.src,u=ws)||C(f,"src",u),C(f,"alt","..."),C(f,"width","30px"),C(r,"class","text-lg text-label font-semibold flex items-center gap-2 text-white"),C(h,"href",w="/water_budget?type="+s[1]+"&filename="+s[0].filename),C(h,"class","px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600"),C(a,"class","flex items-center justify-between mb-3"),C(P,"class","font-semibold"),C(S,"class","bg-surface-700 rounded-lg p-4"),C(z,"class","font-bold text-lg"),C(ne,"class","font-bold ml-4 text-blue-400"),C(Ee,"class","ml-2"),C(te,"class","font-bold ml-4 text-blue-400"),C(pe,"class","ml-2"),C(ue,"class","font-bold ml-4 text-blue-400"),C(ie,"class","ml-2"),C(ge,"class","font-bold ml-4 text-blue-400"),C(_e,"class","font-medium text-zinc-300"),C(fe,"class","font-bold ml-4 text-blue-400"),C(be,"class","ml-2"),C(qe,"class","font-bold ml-4 text-blue-400"),C(St,"class","ml-2"),C(Ue,"class","font-bold ml-4 text-blue-400"),C(Rt,"class","ml-2"),C(He,"class","font-bold text-lg mt-4"),C(Ze,"class","font-bold ml-4 text-blue-400"),C(It,"class","ml-2"),C(Ye,"class","font-bold text-lg mt-4"),C(Qe,"class","font-bold ml-4 text-blue-400"),C(Ne,"class","ml-2"),C(Je,"class","font-bold ml-4 text-blue-400"),C(Nt,"class","ml-2"),C(tt,"class","font-bold ml-4 text-blue-400"),C(Dt,"class","ml-2"),C(lt,"class","font-bold ml-4 text-blue-400"),C(At,"class","ml-2"),C(st,"class","font-bold ml-4 text-blue-400"),C(Vt,"class","ml-2"),C(ot,"class","font-bold ml-4 text-blue-400"),C(Mt,"class","ml-2"),C(rt,"class","font-bold text-lg mt-4"),C(ct,"class","font-bold ml-4 text-blue-400"),C(jt,"class","ml-2"),C(ut,"class","font-bold ml-4 text-blue-400"),C(Lt,"class","ml-2"),C(mt,"class","font-bold ml-4 text-blue-400"),C(zt,"class","ml-2"),C(vt,"class","ffont-bold ml-4"),C(Ft,"class","ml-2"),C(x,"class","p-4"),C(gt,"class","text-lg font-semibold mb-3 flex items-center gap-2 text-white"),C(we,"class","p-4"),C($,"class","grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-4 mt-4 bg-surface-800 rounded-lg"),C(oa,"class","grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-4 text-zinc-200 mt-3"),C(l,"class","")},m(k,N){A(k,e,N),A(k,t,N),A(k,l,N),n(l,a),n(a,r),n(r,f),n(r,i),n(r,c),n(a,d),n(a,h),n(h,g),n(l,I),n(l,S),n(S,P),n(P,m),n(l,b),n(l,$),n($,x),n(x,z),n(x,de),n(x,ee),n(ee,ne),n(ee,Et),n(ee,Ee),n(Ee,$e),n(x,ze),n(x,F),n(F,te),n(F,me),n(F,pe),n(pe,se),n(x,U),n(x,q),n(q,ue),n(q,ve),n(q,ie),n(ie,Fe),n(x,Re),n(x,ke),n(ke,ge),n(ke,he),n(ke,_e),n(_e,$t),n(_e,yt),n(_e,ae),n(x,oe),n(x,re),n(re,fe),n(re,kt),n(re,be),n(be,Pt),n(x,K),n(x,Ge),n(Ge,qe),n(Ge,Qa),n(Ge,St),n(St,ca),n(x,Wa),n(x,Be),n(Be,Ue),n(Be,Ja),n(Be,Rt),n(Rt,da),n(x,el),n(x,He),n(x,tl),n(x,Ke),n(Ke,Ze),n(Ke,al),n(Ke,It),n(It,ua),n(x,ll),n(x,Ye),n(x,nl),n(x,Xe),n(Xe,Qe),n(Xe,sl),n(Xe,Ne),n(Ne,_a),n(Ne,il),n(Ne,ma),n(x,ol),n(x,We),n(We,Je),n(We,rl),n(We,Nt),n(Nt,pa),n(x,fl),n(x,et),n(et,tt),n(et,cl),n(et,Dt),n(Dt,va),n(x,dl),n(x,at),n(at,lt),n(at,ul),n(at,At),n(At,ga),n(x,_l),n(x,nt),n(nt,st),n(nt,ml),n(nt,Vt),n(Vt,ha),n(x,pl),n(x,it),n(it,ot),n(it,vl),n(it,Mt),n(Mt,ba),n(x,gl),Z&&Z.m(x,null),n(x,Ca),Y&&Y.m(x,null),n(x,wa),n(x,rt),n(x,hl),n(x,ft),n(ft,ct),n(ft,bl),n(ft,jt),n(jt,xa),n(x,Cl),n(x,dt),n(dt,ut),n(dt,wl),n(dt,Lt),n(Lt,Ta),n(x,xl),n(x,_t),n(_t,mt),n(_t,Tl),n(_t,zt),n(zt,Ea),n(x,El),n(x,pt),n(pt,vt),n(pt,$l),n(pt,Ft),n(Ft,$a),n($,yl),n($,we),Q(De,we,null),n(we,kl),n(we,gt),n(we,Pl),n(we,Ot),n(l,Sl),Q(Ae,l,null),n(l,Rl),n(l,oa),A(k,ya,N),Q(Ve,k,N),O=!0},p(k,[N]){(!O||N&1)&&o!==(o=k[0].filename+"")&&G(c,o),(!O||N&3&&w!==(w="/water_budget?type="+k[1]+"&filename="+k[0].filename))&&C(h,"href",w),(!O||N&8)&&G(m,k[3]),(!O||N&1)&&Le!==(Le=k[0].metadata.file.short_variable_name+"")&&G($e,Le),(!O||N&1)&&H!==(H=k[0].metadata.file.long_name+"")&&G(se,H),(!O||N&1)&&ye!==(ye=k[0].metadata.file.unit+"")&&G(Fe,ye),(!O||N&1)&&Ie!==(Ie=Za(k[0].metadata.file.global_min,2)+"")&&G($t,Ie),(!O||N&1)&&Oe!==(Oe=Za(k[0].metadata.file.global_max,2)+"")&&G(ae,Oe),(!O||N&1)&&Ce!==(Ce=k[0].metadata.file.experiment_id+"")&&G(Pt,Ce),(!O||N&1)&&Kt!==(Kt=k[0].metadata.file.bias_correction+"")&&G(ca,Kt),(!O||N&1)&&Zt!==(Zt=k[0].metadata.file.indicator+"")&&G(da,Zt),(!O||N&1)&&Yt!==(Yt=k[0].metadata.file.nominal_resolution+"")&&G(ua,Yt),(!O||N&1)&&Xt!==(Xt=k[0].metadata.file.time_coverage_start+"")&&G(_a,Xt),(!O||N&1)&&Qt!==(Qt=k[0].metadata.file.time_coverage_end+"")&&G(ma,Qt),(!O||N&1)&&Wt!==(Wt=k[0].metadata.file.frequency+"")&&G(pa,Wt),(!O||N&1)&&Jt!==(Jt=k[0].metadata.file.num_time_steps+"")&&G(va,Jt),(!O||N&1)&&ea!==(ea=k[0].metadata.file.time_units+"")&&G(ga,ea),(!O||N&1)&&ta!==(ta=k[0].metadata.file.time_calendar+"")&&G(ha,ta),(!O||N&1)&&aa!==(aa=k[0].metadata.file.nominal_resolution+"")&&G(ba,aa),k[0].metadata.file.climatology_bounds?Z?Z.p(k,N):(Z=Tn(k),Z.c(),Z.m(x,Ca)):Z&&(Z.d(1),Z=null),k[0].metadata.file.climatology_bounds_details?Y?Y.p(k,N):(Y=En(k),Y.c(),Y.m(x,wa)):Y&&(Y.d(1),Y=null),(!O||N&1)&&la!==(la=k[0].metadata.file.file_format+"")&&G(xa,la),(!O||N&1)&&na!==(na=xn(k[0].metadata.file.file_size)+"")&&G(Ta,na),(!O||N&1)&&sa!==(sa=k[0].metadata.file.birth_time+"")&&G(Ea,sa),(!O||N&1)&&ia!==(ia=k[0].metadata.file.last_modification_time+"")&&G($a,ia);const ht={};N&1&&(ht.extent=[k[0].metadata.file.geospatial_lon_min,k[0].metadata.file.geospatial_lat_min,k[0].metadata.file.geospatial_lon_max,k[0].metadata.file.geospatial_lat_max]),De.$set(ht);const bt={};N&1&&(bt.file=k[0].metadata.file),Ae.$set(bt);const ra={};N&32823&&(ra.$$scope={dirty:N,ctx:k}),Ve.$set(ra)},i(k){O||(D(De.$$.fragment,k),D(Ae.$$.fragment,k),D(Ve.$$.fragment,k),O=!0)},o(k){V(De.$$.fragment,k),V(Ae.$$.fragment,k),V(Ve.$$.fragment,k),O=!1},d(k){k&&(_(e),_(t),_(l),_(ya)),Z&&Z.d(),Y&&Y.d(),X(De),X(Ae),X(Ve,k)}}}function je(s){if(typeof s=="object"){const e=s[0].split("-")[0],t=s[1].split("-")[0];return e+" - "+t}else return s.split("-")[0]}function zs(s,e,t){let l,{folder_data:a}=e,{file_obj:r}=e,{foldertype:f}=e,{in_main_page:u}=e;r!=null&&(a=a[r.index]);let i="No description available";if(!u)try{i=vs(a.filename,f,a.metadata)}catch(m){console.log(m)}let o=Math.random().toString(36).substring(2,15),c=a.tabset;function d(m){s.$$.not_equal(a.metadata_prov,m)&&(a.metadata_prov=m,t(0,a))}function h(m){s.$$.not_equal(a.metadata_prov_stats,m)&&(a.metadata_prov_stats=m,t(0,a))}function g(m){l=m,t(5,l),t(0,a)}function w(m){c=m,t(4,c)}function I(m){c=m,t(4,c)}function S(m){c=m,t(4,c)}function P(m){c=m,t(4,c)}return s.$$set=m=>{"folder_data"in m&&t(0,a=m.folder_data),"file_obj"in m&&t(7,r=m.file_obj),"foldertype"in m&&t(1,f=m.foldertype),"in_main_page"in m&&t(2,u=m.in_main_page)},s.$$.update=()=>{s.$$.dirty&1&&t(5,l=a.filename)},[a,f,u,i,c,l,o,r,d,h,g,w,I,S,P]}class Fs extends Nl{constructor(e){super(),Dl(this,e,zs,Ls,Xa,{folder_data:0,file_obj:7,foldertype:1,in_main_page:2})}}function Rn(s){let e,t;return e=new Fs({props:{folder_data:s[0],file_obj:Dn,foldertype:s[1],in_main_page:Gs}}),{c(){J(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,a){Q(e,l,a),t=!0},p(l,a){const r={};a&1&&(r.folder_data=l[0]),a&2&&(r.foldertype=l[1]),e.$set(r)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Os(s){let e,t,l=`<h1 class="content-heading">File Information</h1> <img src="${Vn}" alt="..." width="30px"/>`,a,r,f=`This page shows detailed information for a single file in the Climate Services Gateway. Download
		is currently only available via the collection view.`,u,i,o=s[0]&&s[0].metadata&&Rn(s);return{c(){e=v("div"),t=v("div"),t.innerHTML=l,a=E(),r=v("blockquote"),r.textContent=f,u=E(),o&&o.c(),this.h()},l(c){e=p(c,"DIV",{class:!0});var d=y(e);t=p(d,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-1q2fsxv"&&(t.innerHTML=l),a=T(d),r=p(d,"BLOCKQUOTE",{class:!0,"data-svelte-h":!0}),L(r)!=="svelte-13yk7z6"&&(r.textContent=f),u=T(d),o&&o.l(d),d.forEach(_),this.h()},h(){C(t,"class","flex"),C(r,"class","content-blockquote mb-4"),C(e,"class","content-div")},m(c,d){A(c,e,d),n(e,t),n(e,a),n(e,r),n(e,u),o&&o.m(e,null),i=!0},p(c,[d]){c[0]&&c[0].metadata?o?(o.p(c,d),d&1&&D(o,1)):(o=Rn(c),o.c(),D(o,1),o.m(e,null)):o&&(xe(),V(o,1,1,()=>{o=null}),Te())},i(c){i||(D(o),i=!0)},o(c){V(o),i=!1},d(c){c&&_(e),o&&o.d()}}}const Dn=null,Gs=!1;function qs(s,e,t){let l=[],a,r="",f="";async function u(o,c){t(0,a=await fs(o,c)),console.log(a),i(c,o)}async function i(o,c){console.log("get_metadata_and_prov",o,c,Dn),t(0,a.tabset=0,a);const d=await fetch(Tt+"/climate/get_temp_file?name="+o+"&type="+c+"&filetype=meta",{method:"GET"});if(!d.ok)a.metadata||t(0,a.metadata={},a),t(0,a.metadata={"currently no metadata available":"for this file"},a),t(0,a.metadata_exists=!1,a),console.log(a.metadata);else{const w=await d.json();l=w,await qt(),a.metadata||t(0,a.metadata={},a),t(0,a.metadata_exists=!0,a),t(0,a.metadata=w,a),await qt(),console.log(l)}const h=await fetch(Tt+"/climate/get_temp_file?name="+o+"&type="+c+"&filetype=prov",{method:"GET"});if(!h.ok)a.metadata_prov||t(0,a.metadata_prov={},a),t(0,a.metadata_prov_exists=!1,a),t(0,a.metadata_prov={"currently no provenance information available":"for this file"},a),console.log(a.metadata_prov);else{const w=await h.json();l=w,await qt(),a.metadata_prov||t(0,a.metadata_prov={},a),t(0,a.metadata_prov_exists=!0,a),t(0,a.metadata_prov=w,a),await qt(),console.log(l)}const g=await fetch(Tt+"/climate/get_temp_file?name="+o+"&type="+c+"&filetype=prov_stats",{method:"GET"});if(!g.ok)a.metadata_prov_stats||t(0,a.metadata_prov_stats={},a),t(0,a.metadata_prov_stats_exists=!1,a),t(0,a.metadata_prov_stats={"currently no provenance information available":"for this file"},a),console.log(a.metadata_prov_stats);else{const w=await g.json();l=w,await qt(),a.metadata_prov_stats||t(0,a.metadata_prov_stats={},a),t(0,a.metadata_prov_stats_exists=!0,a),t(0,a.metadata_prov_stats=w,a),await qt(),console.log(l)}t(0,a.metadata_show=!0,a),history.pushState({},"","?type="+c+"&filename="+o)}In(()=>{u(r,f),console.log(a)});{const o=new URLSearchParams(window.location.search),c=o.get("type");c&&t(1,r=c);const d=o.get("filename");d&&(f=d)}return[a,r]}class Qs extends Nl{constructor(e){super(),Dl(this,e,qs,Os,Xa,{})}}export{Qs as component};
