import{s as ce,e as k,t as U,a as H,q as G,c as y,b as P,d as j,f as s,g as z,m as _,i as d,h as f,x as le,p as Q,n as J,r as ue,y as _e,l as K,o as de,j as $,z as pe,u as be}from"../chunks/scheduler.DbvQfQVF.js";import{e as ne}from"../chunks/each.BD2ZG6u7.js";import{S as ve,i as he}from"../chunks/index.BW8OJYk7.js";import{A as x}from"../chunks/app.config.BO6XNHuD.js";import{_ as ie}from"../chunks/fetch_folder_content.CVBNLQfF.js";function ae(a,t,e){const l=a.slice();return l[22]=t[e],l[24]=e,l}function me(a){let t,e="<p>Loading...</p>";return{c(){t=k("div"),t.innerHTML=e},l(l){t=y(l,"DIV",{"data-svelte-h":!0}),K(t)!=="svelte-1vs96ti"&&(t.innerHTML=e)},m(l,i){d(l,t,i)},p:J,d(l){l&&s(t)}}}function ke(a){let t,e,l="Filename",i,n,o="Filesize",N,v,L="Last modified",q,B,D="Download Link",F,p,E="Visualize",O,R,c,C="Generate Wget link for download",S,w,T=ne(Object.values(a[0].content)),I=[];for(let h=0;h<T.length;h+=1)I[h]=oe(ae(a,T,h));return{c(){t=k("div"),e=k("div"),e.textContent=l,i=H(),n=k("div"),n.textContent=o,N=H(),v=k("div"),v.textContent=L,q=H(),B=k("div"),B.textContent=D,F=H(),p=k("div"),p.textContent=E,O=H();for(let h=0;h<I.length;h+=1)I[h].c();R=H(),c=k("button"),c.textContent=C,this.h()},l(h){t=y(h,"DIV",{class:!0});var M=P(t);e=y(M,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-32zc08"&&(e.textContent=l),i=z(M),n=y(M,"DIV",{"data-svelte-h":!0}),K(n)!=="svelte-1er2eqp"&&(n.textContent=o),N=z(M),v=y(M,"DIV",{"data-svelte-h":!0}),K(v)!=="svelte-8z07u1"&&(v.textContent=L),q=z(M),B=y(M,"DIV",{"data-svelte-h":!0}),K(B)!=="svelte-wyo69u"&&(B.textContent=D),F=z(M),p=y(M,"DIV",{"data-svelte-h":!0}),K(p)!=="svelte-1ni2m1o"&&(p.textContent=E),O=z(M);for(let m=0;m<I.length;m+=1)I[m].l(M);M.forEach(s),R=z(h),c=y(h,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(c)!=="svelte-y2sc8e"&&(c.textContent=C),this.h()},h(){_(e,"class","col-span-6"),_(t,"class","grid grid-cols-10"),_(c,"type","button"),_(c,"class","btn variant-ghost-primary")},m(h,M){d(h,t,M),f(t,e),f(t,i),f(t,n),f(t,N),f(t,v),f(t,q),f(t,B),f(t,F),f(t,p),f(t,O);for(let m=0;m<I.length;m+=1)I[m]&&I[m].m(t,null);d(h,R,M),d(h,c,M),S||(w=Q(c,"click",pe(a[7])),S=!0)},p(h,M){if(M&89){T=ne(Object.values(h[0].content));let m;for(m=0;m<T.length;m+=1){const A=ae(h,T,m);I[m]?I[m].p(A,M):(I[m]=oe(A),I[m].c(),I[m].m(t,null))}for(;m<I.length;m+=1)I[m].d(1);I.length=T.length}},d(h){h&&(s(t),s(R),s(c)),be(I,h),S=!1,w()}}}function se(a){let t,e,l,i=a[22][0]+"",n,o,N,v=a[22][1]+"",L,q,B,D=a[22][2]+"",F,p,E,O,R,c,C,S,w,T,I,h,M;function m(r,V){return r[22][3]&&!r[22][3].in_size_limit?Ce:ye}let A=m(a),g=A(a);function u(r,V){return r[22][3]?r[22][3].tif_cached?De:r[22][3].in_size_limit?we:ge:Ee}let b=u(a),W=b(a);return{c(){t=k("div"),e=k("input"),l=U(`
					 `),n=U(i),o=H(),N=k("div"),L=U(v),q=H(),B=k("div"),F=U(D),p=H(),E=k("div"),O=U(" "),R=k("a"),c=U("download"),S=H(),g.c(),w=H(),T=k("div"),W.c(),I=H(),this.h()},l(r){t=y(r,"DIV",{class:!0});var V=P(t);e=y(V,"INPUT",{type:!0,id:!0}),l=j(V,`
					 `),n=j(V,i),V.forEach(s),o=z(r),N=y(r,"DIV",{});var X=P(N);L=j(X,v),X.forEach(s),q=z(r),B=y(r,"DIV",{});var Y=P(B);F=j(Y,D),Y.forEach(s),p=z(r),E=y(r,"DIV",{});var Z=P(E);O=j(Z," "),R=y(Z,"A",{href:!0,class:!0});var te=P(R);c=j(te,"download"),te.forEach(s),S=z(Z),g.l(Z),Z.forEach(s),w=z(r),T=y(r,"DIV",{});var ee=P(T);W.l(ee),I=z(ee),ee.forEach(s),this.h()},h(){_(e,"type","checkbox"),e.value=a[24],_(e,"id","checkbox_"+a[24]),_(t,"class","col-span-6"),_(R,"href",C=x+"/climate/get_temp_file?name="+a[22][0]+"&type="+a[3]+"&filetype=nc"),_(R,"class","underline")},m(r,V){d(r,t,V),f(t,e),f(t,l),f(t,n),d(r,o,V),d(r,N,V),f(N,L),d(r,q,V),d(r,B,V),f(B,F),d(r,p,V),d(r,E,V),f(E,O),f(E,R),f(R,c),f(E,S),g.m(E,null),d(r,w,V),d(r,T,V),W.m(T,null),f(T,I),h||(M=Q(e,"change",a[6]),h=!0)},p(r,V){V&1&&i!==(i=r[22][0]+"")&&$(n,i),V&1&&v!==(v=r[22][1]+"")&&$(L,v),V&1&&D!==(D=r[22][2]+"")&&$(F,D),V&9&&C!==(C=x+"/climate/get_temp_file?name="+r[22][0]+"&type="+r[3]+"&filetype=nc")&&_(R,"href",C),A===(A=m(r))&&g?g.p(r,V):(g.d(1),g=A(r),g&&(g.c(),g.m(E,null))),b===(b=u(r))&&W?W.p(r,V):(W.d(1),W=b(r),W&&(W.c(),W.m(T,I)))},d(r){r&&(s(t),s(o),s(N),s(q),s(B),s(p),s(E),s(w),s(T)),g.d(),W.d(),h=!1,M()}}}function ye(a){let t,e,l,i;return{c(){t=U(" "),e=k("a"),l=U("download as tif"),this.h()},l(n){t=j(n," "),e=y(n,"A",{href:!0,class:!0});var o=P(e);l=j(o,"download as tif"),o.forEach(s),this.h()},h(){_(e,"href",i=x+"/climate/get_temp_file?name="+a[22][0]+"&type="+a[3]+"&filetype=tif"),_(e,"class","underline")},m(n,o){d(n,t,o),d(n,e,o),f(e,l)},p(n,o){o&9&&i!==(i=x+"/climate/get_temp_file?name="+n[22][0]+"&type="+n[3]+"&filetype=tif")&&_(e,"href",i)},d(n){n&&(s(t),s(e))}}}function Ce(a){let t;return{c(){t=U("tif not available")},l(e){t=j(e,"tif not available")},m(e,l){d(e,t,l)},p:J,d(e){e&&s(t)}}}function ge(a){let t;return{c(){t=U("Not Convertable")},l(e){t=j(e,"Not Convertable")},m(e,l){d(e,t,l)},p:J,d(e){e&&s(t)}}}function we(a){let t;function e(n,o){return n[22][3].tif_convertable?Ie:Te}let l=e(a),i=l(a);return{c(){i.c(),t=G()},l(n){i.l(n),t=G()},m(n,o){i.m(n,o),d(n,t,o)},p(n,o){l===(l=e(n))&&i?i.p(n,o):(i.d(1),i=l(n),i&&(i.c(),i.m(t.parentNode,t)))},d(n){n&&s(t),i.d(n)}}}function De(a){let t;return{c(){t=U("Mapview (tif)")},l(e){t=j(e,"Mapview (tif)")},m(e,l){d(e,t,l)},p:J,d(e){e&&s(t)}}}function Ee(a){let t;return{c(){t=U("Request Mapview (tif) [noFileData]")},l(e){t=j(e,"Request Mapview (tif) [noFileData]")},m(e,l){d(e,t,l)},p:J,d(e){e&&s(t)}}}function Te(a){let t;function e(n,o){return n[22][3].num_bands?Ne:Ve}let l=e(a),i=l(a);return{c(){i.c(),t=G()},l(n){i.l(n),t=G()},m(n,o){i.m(n,o),d(n,t,o)},p(n,o){l!==(l=e(n))&&(i.d(1),i=l(n),i&&(i.c(),i.m(t.parentNode,t)))},d(n){n&&s(t),i.d(n)}}}function Ie(a){let t;return{c(){t=U("Request Mapview (tif) [noTifFile]")},l(e){t=j(e,"Request Mapview (tif) [noTifFile]")},m(e,l){d(e,t,l)},p:J,d(e){e&&s(t)}}}function Ve(a){let t;return{c(){t=U("Request Mapview [noMetaData]")},l(e){t=j(e,"Request Mapview [noMetaData]")},m(e,l){d(e,t,l)},d(e){e&&s(t)}}}function Ne(a){let t;return{c(){t=U("Not Convertable")},l(e){t=j(e,"Not Convertable")},m(e,l){d(e,t,l)},d(e){e&&s(t)}}}function oe(a){let t=a[22][0].toLowerCase().includes(a[4].toLowerCase()),e,l=t&&se(a);return{c(){l&&l.c(),e=G()},l(i){l&&l.l(i),e=G()},m(i,n){l&&l.m(i,n),d(i,e,n)},p(i,n){n&17&&(t=i[22][0].toLowerCase().includes(i[4].toLowerCase())),t?l?l.p(i,n):(l=se(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(i){i&&s(e),l&&l.d(i)}}}function re(a){let t,e,l,i="<span>To download all objects using Wget:</span>",n,o,N,v,L,q="<span>Additional arguments:</span>",B,D,F;return{c(){t=k("div"),e=k("div"),l=k("div"),l.innerHTML=i,n=H(),o=k("span"),N=U(a[5]),v=H(),L=k("div"),L.innerHTML=q,B=H(),D=k("span"),F=U(fe),this.h()},l(p){t=y(p,"DIV",{style:!0});var E=P(t);e=y(E,"DIV",{class:!0});var O=P(e);l=y(O,"DIV",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-1dbgnme"&&(l.innerHTML=i),n=z(O),o=y(O,"SPAN",{class:!0});var R=P(o);N=j(R,a[5]),R.forEach(s),v=z(O),L=y(O,"DIV",{class:!0,"data-svelte-h":!0}),K(L)!=="svelte-f7330h"&&(L.innerHTML=q),B=z(O),D=y(O,"SPAN",{class:!0});var c=P(D);F=j(c,fe),c.forEach(s),O.forEach(s),E.forEach(s),this.h()},h(){_(l,"class","mb-2"),_(o,"class","bg-[#f9f2f4] p-[3px] rounded-sm text-red-500 [word-spacing:6px]"),_(L,"class","mb-1 mt-2 text-sm"),_(D,"class","bg-[#f9f2f4] p-[3px] rounded-sm text-red-500 text-sm [word-spacing:4px]"),_(e,"class","bg-[#d9edf7] border-2 border-[#bce8f1] text-[#31708f] rounded-md p-4 m-2"),de(t,"display","flex")},m(p,E){d(p,t,E),f(t,e),f(e,l),f(e,n),f(e,o),f(o,N),f(e,v),f(e,L),f(e,B),f(e,D),f(D,F)},p(p,E){E&32&&$(N,p[5])},d(p){p&&s(t)}}}function Me(a){let t,e,l,i,n,o,N,v,L,q,B,D,F,p,E,O,R,c,C,S,w,T,I,h;function M(u,b){return u[0]!=null?ke:me}let m=M(a),A=m(a),g=a[5].length>0&&re(a);return{c(){t=k("div"),e=k("button"),l=U("Water Budget"),n=H(),o=k("button"),N=U("Water Budget bias adjusted"),L=H(),q=k("button"),B=U("Kariba"),F=H(),p=k("button"),E=U("Vaal"),R=H(),c=k("div"),C=k("input"),S=H(),A.c(),w=H(),g&&g.c(),T=G(),this.h()},l(u){t=y(u,"DIV",{class:!0});var b=P(t);e=y(b,"BUTTON",{type:!0,class:!0});var W=P(e);l=j(W,"Water Budget"),W.forEach(s),n=z(b),o=y(b,"BUTTON",{type:!0,class:!0});var r=P(o);N=j(r,"Water Budget bias adjusted"),r.forEach(s),L=z(b),q=y(b,"BUTTON",{type:!0,class:!0});var V=P(q);B=j(V,"Kariba"),V.forEach(s),F=z(b),p=y(b,"BUTTON",{type:!0,class:!0});var X=P(p);E=j(X,"Vaal"),X.forEach(s),b.forEach(s),R=z(u),c=y(u,"DIV",{});var Y=P(c);C=y(Y,"INPUT",{class:!0,type:!0,placeholder:!0}),Y.forEach(s),S=z(u),A.l(u),w=z(u),g&&g.l(u),T=G(),this.h()},h(){_(e,"type","button"),_(e,"class",i="btn variant-filled-tertiary "+a[1]),_(o,"type","button"),_(o,"class",v="btn variant-filled-tertiary "+a[2]),_(q,"type","button"),_(q,"class",D="btn variant-filled-tertiary "+a[2]),_(p,"type","button"),_(p,"class",O="btn variant-filled-tertiary "+a[2]),_(t,"class","btn-group variant-ghost-primary [&>*+*]:border-red-500 h-6"),_(C,"class","input w-full mt-4"),_(C,"type","text"),_(C,"placeholder","Filter filenames...")},m(u,b){d(u,t,b),f(t,e),f(e,l),f(t,n),f(t,o),f(o,N),f(t,L),f(t,q),f(q,B),f(t,F),f(t,p),f(p,E),d(u,R,b),d(u,c,b),f(c,C),le(C,a[4]),d(u,S,b),A.m(u,b),d(u,w,b),g&&g.m(u,b),d(u,T,b),I||(h=[Q(e,"click",a[9]),Q(o,"click",a[10]),Q(q,"click",a[11]),Q(p,"click",a[12]),Q(C,"input",a[13])],I=!0)},p(u,[b]){b&2&&i!==(i="btn variant-filled-tertiary "+u[1])&&_(e,"class",i),b&4&&v!==(v="btn variant-filled-tertiary "+u[2])&&_(o,"class",v),b&4&&D!==(D="btn variant-filled-tertiary "+u[2])&&_(q,"class",D),b&4&&O!==(O="btn variant-filled-tertiary "+u[2])&&_(p,"class",O),b&16&&C.value!==u[4]&&le(C,u[4]),m===(m=M(u))&&A?A.p(u,b):(A.d(1),A=m(u),A&&(A.c(),A.m(w.parentNode,w))),u[5].length>0?g?g.p(u,b):(g=re(u),g.c(),g.m(T.parentNode,T)):g&&(g.d(1),g=null)},i:J,o:J,d(u){u&&(s(t),s(R),s(c),s(S),s(w),s(T)),A.d(u),g&&g.d(u),I=!1,ue(h)}}}let fe="-r -H -N --cut-dirs=2";function Le(a,t,e){let l,i,n=[],o="font-bold",N="",v="kariba";_e(()=>{ie(v).then(c=>{e(0,i=c),console.log(i)}).catch(c=>{console.log(c)})});let L="";function q(c){let C=parseInt(c.srcElement.value),S=c.srcElement.checked;n[C]=S}async function B(){const c=x+"/climate/select_temp_urls?type="+v;let C=[];for(let w=0;w<n.length;w++)n[w]&&C.push(i.content[w][0]);console.log("CHECKED: ",C);try{const w=await fetch(c,{method:"POST",body:JSON.stringify(C)});let T=[];if(!w.ok){var S=await w.text();throw new Error(`${w.status} ${w.statusText}
Reason: ${S}`)}T=await w.json(),console.log("RESULT: ",T),e(5,l=T["wget-command"])}catch(w){console.log(w)}}function D(c){c=="water_budget"?(e(2,N=""),e(1,o="font-bold"),e(3,v=c)):(c=="water_budget_bias"||c=="kariba"||c=="vaal")&&(e(1,o=""),e(2,N="font-bold"),e(3,v=c)),ie(v).then(C=>{e(0,i=C)}).catch(C=>{console.log(C)})}const F=()=>D("water_budget"),p=()=>D("water_budget_bias"),E=()=>D("kariba"),O=()=>D("vaal");function R(){L=this.value,e(4,L)}return e(5,l=""),[i,o,N,v,L,l,q,B,D,F,p,E,O,R]}class He extends ve{constructor(t){super(),he(this,t,Le,Me,ce,{})}}export{He as component};
