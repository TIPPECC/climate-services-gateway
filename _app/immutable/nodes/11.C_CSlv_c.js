import{s as He,n as te,d as m,i as E,l as k,c as T,e as A,h as y,z as Rt,v as z,a as je,b,q as xt,g as N,f as G,m as me,j as D,t as U,E as ye,I as Ee,u as Xe,C as Ke}from"../chunks/BxLJEKiw.js";import{S as tt,i as at,t as w,a as $,g as le,e as ie,d as q,m as K,c as Z,b as Y,f as Re}from"../chunks/C51hC2gC.js";import{A as Le}from"../chunks/BO6XNHuD.js";import{C as Vt,c as jt,b as zt,d as Ue,e as rt,f as Mt,I as Lt,R as ft,t as Ft,g as Ot,h as Bt,i as _t,j as Gt,k as ut,l as Ze,m as ct,n as Ut,o as qt,p as Kt,q as Zt,r as Yt,s as Xt,B as Ht,M as Qt,V as Wt,O as Jt,P as ea,F as ta,u as aa,v as na,S as la,w as ia,x as oa,T as It,y as sa}from"../chunks/CSZmlaUs.js";import"../chunks/D6iI9jZ6.js";import{T as Pt,s as pt,C as Nt,a as Be,r as qe,D as et,P as Ye,M as Dt,b as At}from"../chunks/DSLGdCbZ.js";class ra extends Vt{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=jt(),this.tmpTileRange_=new zt(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),a=e.getState(),n=t.getUseInterimTilesOnError();return a==Ue.LOADED||a==Ue.EMPTY||a==Ue.ERROR&&!n}getTile(e,t,a,n){const o=n.pixelRatio,s=n.viewState.projection,_=this.getLayer();let r=_.getSource().getTile(e,t,a,o,s);return r.getState()==Ue.ERROR&&_.getUseInterimTilesOnError()&&_.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(r)||(r=r.getInterimTile()),r}getData(e){const t=this.frameState;if(!t)return null;const a=this.getLayer(),n=rt(t.pixelToCoordinateTransform,e.slice()),o=a.getExtent();if(o&&!Mt(o,n))return null;const s=t.pixelRatio,_=t.viewState.projection,l=t.viewState,r=a.getRenderSource(),u=r.getTileGridForProjection(l.projection),f=r.getTilePixelRatio(t.pixelRatio);for(let c=u.getZForResolution(l.resolution);c>=u.getMinZoom();--c){const p=u.getTileCoordForCoordAndZ(n,c),h=r.getTile(c,p[1],p[2],s,_);if(!(h instanceof Lt||h instanceof ft)||h instanceof ft&&h.getState()===Ue.EMPTY)return null;if(h.getState()!==Ue.LOADED)continue;const R=u.getOrigin(c),j=Ft(u.getTileSize(c)),P=u.getResolution(c),g=Math.floor(f*((n[0]-R[0])/P-p[1]*j[0])),v=Math.floor(f*((R[1]-n[1])/P-p[2]*j[1])),C=Math.round(f*r.getGutterForProjection(l.projection));return this.getImageData(h.getImage(),g+C,v+C)}return null}loadedTileCallback(e,t,a){return this.isDrawableTile(a)?super.loadedTileCallback(e,t,a):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const a=e.layerStatesArray[e.layerIndex],n=e.viewState,o=n.projection,s=n.resolution,_=n.center,l=n.rotation,r=e.pixelRatio,u=this.getLayer(),f=u.getSource(),c=f.getRevision(),p=f.getTileGridForProjection(o),h=p.getZForResolution(s,f.zDirection),R=p.getResolution(h);let j=e.extent;const P=e.viewState.resolution,g=f.getTilePixelRatio(r),v=Math.round(Ot(j)/P*r),C=Math.round(Bt(j)/P*r),B=a.extent&&_t(a.extent);B&&(j=Gt(j,_t(a.extent)));const S=R*v/2/g,J=R*C/2/g,ee=[_[0]-S,_[1]-J,_[0]+S,_[1]+J],Q=p.getTileRangeForExtentAndZ(j,h),W={};W[h]={};const M=this.createLoadedTileFinder(f,o,W),d=this.tmpExtent,x=this.tmpTileRange_;this.newTiles_=!1;const oe=l?ut(n.center,P,l,e.size):void 0;for(let ne=Q.minX;ne<=Q.maxX;++ne)for(let re=Q.minY;re<=Q.maxY;++re){if(l&&!p.tileCoordIntersectsViewport([h,ne,re],oe))continue;const fe=this.getTile(h,ne,re,e);if(this.isDrawableTile(fe)){const be=Ze(this);if(fe.getState()==Ue.LOADED){W[h][fe.tileCoord.toString()]=fe;let ge=fe.inTransition(be);ge&&a.opacity!==1&&(fe.endTransition(be),ge=!1),!this.newTiles_&&(ge||!this.renderedTiles.includes(fe))&&(this.newTiles_=!0)}if(fe.getAlpha(be,e.time)===1)continue}const ke=p.getTileCoordChildTileRange(fe.tileCoord,x,d);let ve=!1;ke&&(ve=M(h+1,ke)),ve||p.forEachTileCoordParentTileRange(fe.tileCoord,M,x,d)}const _e=R/s*r/g;ct(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/r,1/r,l,-v/2,-C/2);const we=Ut(this.pixelTransform);this.useContainer(t,we,this.getBackground(e));const F=this.getRenderContext(e),ae=this.context.canvas;qt(this.inversePixelTransform,this.pixelTransform),ct(this.tempTransform,v/2,C/2,_e,_e,0,-v/2,-C/2),ae.width!=v||ae.height!=C?(ae.width=v,ae.height=C):this.containerReused||F.clearRect(0,0,v,C),B&&this.clipUnrotated(F,e,B),f.getInterpolate()||(F.imageSmoothingEnabled=!1),this.preRender(F,e),this.renderedTiles.length=0;let ue=Object.keys(W).map(Number);ue.sort(Kt);let Ie,ze,se;a.opacity===1&&(!this.containerReused||f.getOpaque(e.viewState.projection))?ue=ue.reverse():(Ie=[],ze=[]);for(let ne=ue.length-1;ne>=0;--ne){const re=ue[ne],fe=f.getTilePixelSize(re,r,o),ve=p.getResolution(re)/R,be=fe[0]*ve*_e,ge=fe[1]*ve*_e,Ne=p.getTileCoordForCoordAndZ(Zt(ee),re),xe=p.getTileCoordExtent(Ne),he=rt(this.tempTransform,[g*(xe[0]-ee[0])/R,g*(ee[3]-xe[3])/R]),Ve=g*f.getGutterForProjection(o),Ce=W[re];for(const Fe in Ce){const ce=Ce[Fe],De=ce.tileCoord,Me=Ne[1]-De[1],Te=Math.round(he[0]-(Me-1)*be),pe=Ne[2]-De[2],X=Math.round(he[1]-(pe-1)*ge),L=Math.round(he[0]-Me*be),O=Math.round(he[1]-pe*ge),Ae=Te-L,H=X-O,I=h===re,V=I&&ce.getAlpha(Ze(this),e.time)!==1;let $e=!1;if(!V)if(Ie){se=[L,O,L+Ae,O,L+Ae,O+H,L,O+H];for(let Pe=0,Oe=Ie.length;Pe<Oe;++Pe)if(h!==re&&re<ze[Pe]){const de=Ie[Pe];Yt([L,O,L+Ae,O+H],[de[0],de[3],de[4],de[7]])&&($e||(F.save(),$e=!0),F.beginPath(),F.moveTo(se[0],se[1]),F.lineTo(se[2],se[3]),F.lineTo(se[4],se[5]),F.lineTo(se[6],se[7]),F.moveTo(de[6],de[7]),F.lineTo(de[4],de[5]),F.lineTo(de[2],de[3]),F.lineTo(de[0],de[1]),F.clip())}Ie.push(se),ze.push(re)}else F.clearRect(L,O,Ae,H);this.drawTileImage(ce,e,L,O,Ae,H,Ve,I),Ie&&!V?($e&&F.restore(),this.renderedTiles.unshift(ce)):this.renderedTiles.push(ce),this.updateUsedTiles(e.usedTiles,f,ce)}}return this.renderedRevision=c,this.renderedResolution=R,this.extentChanged=!this.renderedExtent_||!Xt(this.renderedExtent_,ee),this.renderedExtent_=ee,this.renderedPixelRatio=r,this.renderedProjection=o,this.manageTilePyramid(e,f,p,r,o,j,h,u.getPreload()),this.scheduleExpireCache(e,f),this.postRender(this.context,e),a.extent&&F.restore(),F.imageSmoothingEnabled=!0,we!==ae.style.transform&&(ae.style.transform=we),this.container}drawTileImage(e,t,a,n,o,s,_,l){const r=this.getTileImage(e);if(!r)return;const u=this.getRenderContext(t),f=Ze(this),c=t.layerStatesArray[t.layerIndex],p=c.opacity*(l?e.getAlpha(f,t.time):1),h=p!==u.globalAlpha;h&&(u.save(),u.globalAlpha=p),u.drawImage(r,_,_,r.width-2*_,r.height-2*_,a,n,o,s),h&&u.restore(),p!==c.opacity?t.animate=!0:l&&e.endTransition(f)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const a=(function(n,o,s){const _=Ze(n);_ in s.usedTiles&&n.expireCache(s.viewState.projection,s.usedTiles[_])}).bind(null,t);e.postRenderFunctions.push(a)}}updateUsedTiles(e,t,a){const n=Ze(t);n in e||(e[n]={}),e[n][a.getKey()]=!0}manageTilePyramid(e,t,a,n,o,s,_,l,r){const u=Ze(t);u in e.wantedTiles||(e.wantedTiles[u]={});const f=e.wantedTiles[u],c=e.tileQueue,p=a.getMinZoom(),h=e.viewState.rotation,R=h?ut(e.viewState.center,e.viewState.resolution,h,e.size):void 0;let j=0,P,g,v,C,B,S;for(S=p;S<=_;++S)for(g=a.getTileRangeForExtentAndZ(s,S,g),v=a.getResolution(S),C=g.minX;C<=g.maxX;++C)for(B=g.minY;B<=g.maxY;++B)h&&!a.tileCoordIntersectsViewport([S,C,B],R)||(_-S<=l?(++j,P=t.getTile(S,C,B,n,o),P.getState()==Ue.IDLE&&(f[P.getKey()]=!0,c.isKeyQueued(P.getKey())||c.enqueue([P,u,a.getTileCoordCenter(P.tileCoord),v])),r!==void 0&&r(P)):t.useTile(S,C,B,o));t.updateCacheSize(j,o)}}class fa extends Ht{constructor(e){super(e)}createRenderer(){return new ra(this)}}function _a(i,e,t){let a=t.file.long_name,n=t.file.frequency+"ly",o="None",s=!1,_="None",l="None",r="None",u="None",f="None",c=!1,p="";if(n=="dayly"&&(n="daily"),e.includes("vaal")?o="Vaal":e.includes("kunene")?o="Kunene":e.includes("luanginga")&&(o="Luanginga"),i.includes("_b_")&&(s=!0),e.includes("CORDEX")?(_="Cordex-Core",i.includes("REMO")?r="GERICS-REMO2015":i.includes("KIT")?r="KIT-CCLM5-0-15":i.includes("ICTP")&&(r="ICTP-RegCM4-7"),l=t.driving_model_id):e.includes("CMIP6")?(_="CMIP6",l=t.source_id):e.includes("ERA5")?_="Era5-Land":e.includes("GLEAM")&&(_="GLEAM"),i.includes("yearsum")||i.includes("yearmean")){n="annual aggregated";let h=i.match(/year(?:sum|mean)_(\d{4})_(\d{4})-(\d{4})_(\d{4})/),R=i.match(/year(?:sum|mean)_(\d{4}_\d{4})/);h?(f=`${h[1]}–${h[2]}`,u=`${h[3]}–${h[4]}`):R&&R&&(u=`${R[1]}–${R[2]}`)}if(i.includes("_mean_")){c=!0;let h=i.match(/_mean_(\d{4})_(\d{4})-(\d{4})_(\d{4})/),R=i.match(/_mean_(\d{4})_(\d{4})/);h?(f=`${h[1]}–${h[2]}`,u=`${h[3]}–${h[4]}`):R&&R&&(u=`${R[1]}–${R[2]}`)}return c&&(p+="mean value of "),n!="nonely"&&(p+=n+" data of "),p+=a+" ",_!="None"&&(p+="based on "+_+" ",l!="None"?p+=l+" global model ":p+="dataset ",r!="None"&&(p+="and "+r+" regional model "),s&&(p+="with bias correction "),u!="None"&&(p+="for time period "+u+" "),f!="None"&&(p+="compared to "+f+" "),o!="None"&&(p+="clipped to "+o+" study area ")),p=ua(p),p}function ua(i){return i?(i=i.trimEnd(),i=i.charAt(0).toUpperCase()+i.slice(1),i.endsWith(".")||(i+="."),i):""}function ca(i){let e;return{c(){e=y("div"),this.h()},l(t){e=T(t,"DIV",{id:!0,class:!0}),A(e).forEach(m),this.h()},h(){k(e,"id","map"),k(e,"class","svelte-mjfcf6")},m(t,a){E(t,e,a)},p:te,i:te,o:te,d(t){t&&m(e)}}}function pa(i,e,t){let{extent:a}=e;function n(o,s,_="EPSG:4326"){if(!o||!s||s.length!==4){console.error("Invalid map or extent");return}const[l,r,u,f]=s,c=new ea([[[l,r],[l,f],[u,f],[u,r],[l,r]]]);c.transform(_,o.getView().getProjection());const p=new ta(c),h=new aa({features:[p]}),R=new na({source:h,style:new la({stroke:new oa({color:"rgba(255, 120, 0, 0.8)",width:2}),fill:new ia({color:"rgba(255, 120, 0, 0.2)"})})});return o.addLayer(R),o.getView().fit(c,{padding:[20,20,20,20]}),R}return Rt(()=>{let o=new Qt({target:"map",layers:[new fa({source:new Jt})],view:new Wt({center:[0,0],zoom:2,projection:"EPSG:3857"})});n(o,a)}),i.$$set=o=>{"extent"in o&&t(0,a=o.extent)},[a,n]}class da extends tt{constructor(e){super(),at(this,e,pa,ca,He,{extent:0,drawExtentBox:1})}get drawExtentBox(){return this.$$.ctx[1]}}function ma(i){let e,t,a,n,o,s,_=i[0].filename+"",l,r,u,f,c,p,h,R,j,P,g,v,C="Format:",B,S,J=i[0].metadata.file.file_format+"",ee,Q,W,M,d="Size:",x,oe,_e=pt(i[0].metadata.file.file_size)+"",we,F,ae,ue,Ie="Created:",ze,se,ne=i[0].metadata.file.birth_time+"",re,fe,ke,ve,be="Last Modified:",ge,Ne,xe=i[0].metadata.file.last_modification_time+"",he,Ve,Ce,Fe,ce,De=i[3]?"🔽 Geospatial Information":"▶️ Geospatial Information",Me,Te,pe,X,L,O,Ae;Ce=new Nt({props:{file:i[0].metadata.file,in_main_page:i[2]}});let H=i[3]&&dt(i);return X=new Pt({props:{$$slots:{panel:[Aa],default:[wa]},$$scope:{ctx:i}}}),{c(){e=y("br"),t=D(),a=y("div"),n=y("div"),o=y("h2"),s=U("📁 "),l=U(_),r=D(),u=y("a"),f=U("Collection View"),p=D(),h=y("span"),R=U(i[4]),j=D(),P=y("div"),g=y("div"),v=y("span"),v.textContent=C,B=D(),S=y("span"),ee=U(J),Q=D(),W=y("div"),M=y("span"),M.textContent=d,x=D(),oe=y("span"),we=U(_e),F=D(),ae=y("div"),ue=y("span"),ue.textContent=Ie,ze=D(),se=y("span"),re=U(ne),fe=D(),ke=y("div"),ve=y("span"),ve.textContent=be,ge=D(),Ne=y("span"),he=U(xe),Ve=D(),Y(Ce.$$.fragment),Fe=D(),ce=y("button"),Me=U(De),Te=D(),H&&H.c(),pe=D(),Y(X.$$.fragment),this.h()},l(I){e=T(I,"BR",{}),t=N(I),a=T(I,"DIV",{class:!0});var V=A(a);n=T(V,"DIV",{class:!0});var $e=A(n);o=T($e,"H2",{class:!0});var Pe=A(o);s=G(Pe,"📁 "),l=G(Pe,_),Pe.forEach(m),r=N($e),u=T($e,"A",{href:!0,class:!0});var Oe=A(u);f=G(Oe,"Collection View"),Oe.forEach(m),$e.forEach(m),p=N(V),h=T(V,"SPAN",{class:!0});var de=A(h);R=G(de,i[4]),de.forEach(m),j=N(V),P=T(V,"DIV",{class:!0});var Se=A(P);g=T(Se,"DIV",{});var Ge=A(g);v=T(Ge,"SPAN",{class:!0,"data-svelte-h":!0}),me(v)!=="svelte-1pn9gfd"&&(v.textContent=C),B=N(Ge),S=T(Ge,"SPAN",{class:!0});var nt=A(S);ee=G(nt,J),nt.forEach(m),Ge.forEach(m),Q=N(Se),W=T(Se,"DIV",{});var Qe=A(W);M=T(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),me(M)!=="svelte-8u4tur"&&(M.textContent=d),x=N(Qe),oe=T(Qe,"SPAN",{class:!0});var lt=A(oe);we=G(lt,_e),lt.forEach(m),Qe.forEach(m),F=N(Se),ae=T(Se,"DIV",{});var We=A(ae);ue=T(We,"SPAN",{class:!0,"data-svelte-h":!0}),me(ue)!=="svelte-1aomh3g"&&(ue.textContent=Ie),ze=N(We),se=T(We,"SPAN",{class:!0});var it=A(se);re=G(it,ne),it.forEach(m),We.forEach(m),fe=N(Se),ke=T(Se,"DIV",{});var Je=A(ke);ve=T(Je,"SPAN",{class:!0,"data-svelte-h":!0}),me(ve)!=="svelte-f0xm0z"&&(ve.textContent=be),ge=N(Je),Ne=T(Je,"SPAN",{class:!0});var ot=A(Ne);he=G(ot,xe),ot.forEach(m),Je.forEach(m),Se.forEach(m),V.forEach(m),Ve=N(I),Z(Ce.$$.fragment,I),Fe=N(I),ce=T(I,"BUTTON",{class:!0});var st=A(ce);Me=G(st,De),st.forEach(m),Te=N(I),H&&H.l(I),pe=N(I),Z(X.$$.fragment,I),this.h()},h(){k(o,"class","text-lg text-label font-semibold flex items-center gap-2 text-white svelte-184ua4x"),k(u,"href",c="/water_budget?type="+i[1]+"&filename="+i[0].filename),k(u,"class","px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600"),k(n,"class","flex items-center justify-between mb-3"),k(h,"class","font-bold"),k(v,"class","font-bold text-label svelte-184ua4x"),k(S,"class","font-medium text-zinc-300"),k(M,"class","font-bold text-label svelte-184ua4x"),k(oe,"class","font-medium text-zinc-300"),k(ue,"class","font-bold text-label svelte-184ua4x"),k(se,"class","font-medium text-zinc-300"),k(ve,"class","font-bold text-label svelte-184ua4x"),k(Ne,"class","font-medium text-zinc-300"),k(P,"class","grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-4 text-zinc-200 mt-3"),k(a,"class","bg-box svelte-184ua4x"),k(ce,"class","mt-4 bg-cyan-700 w-full h-[36px] flex items-center hover:bg-gray-700 transition")},m(I,V){E(I,e,V),E(I,t,V),E(I,a,V),b(a,n),b(n,o),b(o,s),b(o,l),b(n,r),b(n,u),b(u,f),b(a,p),b(a,h),b(h,R),b(a,j),b(a,P),b(P,g),b(g,v),b(g,B),b(g,S),b(S,ee),b(P,Q),b(P,W),b(W,M),b(W,x),b(W,oe),b(oe,we),b(P,F),b(P,ae),b(ae,ue),b(ae,ze),b(ae,se),b(se,re),b(P,fe),b(P,ke),b(ke,ve),b(ke,ge),b(ke,Ne),b(Ne,he),E(I,Ve,V),K(Ce,I,V),E(I,Fe,V),E(I,ce,V),b(ce,Me),E(I,Te,V),H&&H.m(I,V),E(I,pe,V),K(X,I,V),L=!0,O||(Ae=xt(ce,"click",i[17]),O=!0)},p(I,V){(!L||V&1)&&_!==(_=I[0].filename+"")&&je(l,_),(!L||V&3&&c!==(c="/water_budget?type="+I[1]+"&filename="+I[0].filename))&&k(u,"href",c),(!L||V&16)&&je(R,I[4]),(!L||V&1)&&J!==(J=I[0].metadata.file.file_format+"")&&je(ee,J),(!L||V&1)&&_e!==(_e=pt(I[0].metadata.file.file_size)+"")&&je(we,_e),(!L||V&1)&&ne!==(ne=I[0].metadata.file.birth_time+"")&&je(re,ne),(!L||V&1)&&xe!==(xe=I[0].metadata.file.last_modification_time+"")&&je(he,xe);const $e={};V&1&&($e.file=I[0].metadata.file),V&4&&($e.in_main_page=I[2]),Ce.$set($e),(!L||V&8)&&De!==(De=I[3]?"🔽 Geospatial Information":"▶️ Geospatial Information")&&je(Me,De),I[3]?H?(H.p(I,V),V&8&&$(H,1)):(H=dt(I),H.c(),$(H,1),H.m(pe.parentNode,pe)):H&&(le(),w(H,1,1,()=>{H=null}),ie());const Pe={};V&33554535&&(Pe.$$scope={dirty:V,ctx:I}),X.$set(Pe)},i(I){L||($(Ce.$$.fragment,I),$(H),$(X.$$.fragment,I),L=!0)},o(I){w(Ce.$$.fragment,I),w(H),w(X.$$.fragment,I),L=!1},d(I){I&&(m(e),m(t),m(a),m(Ve),m(Fe),m(ce),m(Te),m(pe)),q(Ce,I),H&&H.d(I),q(X,I),O=!1,Ae()}}}function ga(i){let e,t,a;return t=new Pt({props:{$$slots:{panel:[Ha],default:[Ma]},$$scope:{ctx:i}}}),{c(){e=y("div"),Y(t.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var o=A(e);Z(t.$$.fragment,o),o.forEach(m),this.h()},h(){k(e,"class","bg-surface-700")},m(n,o){E(n,e,o),K(t,e,null),a=!0},p(n,o){const s={};o&33554535&&(s.$$scope={dirty:o,ctx:n}),t.$set(s)},i(n){a||($(t.$$.fragment,n),a=!0)},o(n){w(t.$$.fragment,n),a=!1},d(n){n&&m(e),q(t)}}}function dt(i){let e,t,a,n,o,s,_=qe(i[0].metadata.file.geospatial_lat_max,4)+"",l,r,u,f,c="↑",p,h,R,j,P,g=qe(i[0].metadata.file.geospatial_lon_min,4)+"",v,C,B,S,J="←",ee,Q,W,M="Resolution:",d,x,oe=i[0].metadata.file.nominal_resolution+"",_e,we,F,ae,ue=qe(i[0].metadata.file.geospatial_lon_max,4)+"",Ie,ze,se,ne,re="→",fe,ke,ve,be,ge,Ne="↓",xe,he,Ve=qe(i[0].metadata.file.geospatial_lat_min,4)+"",Ce,Fe,ce,De,Me,Te,pe;return Te=new da({props:{extent:[i[0].metadata.file.geospatial_lon_min,i[0].metadata.file.geospatial_lat_min,i[0].metadata.file.geospatial_lon_max,i[0].metadata.file.geospatial_lat_max]}}),{c(){e=y("div"),t=y("div"),a=y("div"),n=D(),o=y("div"),s=y("span"),l=U(_),r=U("°"),u=y("br"),f=y("span"),f.textContent=c,p=D(),h=y("div"),R=D(),j=y("div"),P=y("span"),v=U(g),C=U("°"),B=y("br"),S=y("span"),S.textContent=J,ee=D(),Q=y("div"),W=y("span"),W.textContent=M,d=D(),x=y("span"),_e=U(oe),we=D(),F=y("div"),ae=y("span"),Ie=U(ue),ze=U("°"),se=y("br"),ne=y("span"),ne.textContent=re,fe=D(),ke=y("div"),ve=D(),be=y("div"),ge=y("span"),ge.textContent=Ne,xe=y("br"),he=y("span"),Ce=U(Ve),Fe=U("°"),ce=D(),De=y("div"),Me=D(),Y(Te.$$.fragment),this.h()},l(X){e=T(X,"DIV",{class:!0});var L=A(e);t=T(L,"DIV",{class:!0});var O=A(t);a=T(O,"DIV",{}),A(a).forEach(m),n=N(O),o=T(O,"DIV",{});var Ae=A(o);s=T(Ae,"SPAN",{class:!0});var H=A(s);l=G(H,_),r=G(H,"°"),H.forEach(m),u=T(Ae,"BR",{}),f=T(Ae,"SPAN",{class:!0,"data-svelte-h":!0}),me(f)!=="svelte-uj8tir"&&(f.textContent=c),Ae.forEach(m),p=N(O),h=T(O,"DIV",{}),A(h).forEach(m),R=N(O),j=T(O,"DIV",{});var I=A(j);P=T(I,"SPAN",{class:!0});var V=A(P);v=G(V,g),C=G(V,"°"),V.forEach(m),B=T(I,"BR",{}),S=T(I,"SPAN",{class:!0,"data-svelte-h":!0}),me(S)!=="svelte-1g56nau"&&(S.textContent=J),I.forEach(m),ee=N(O),Q=T(O,"DIV",{});var $e=A(Q);W=T($e,"SPAN",{class:!0,"data-svelte-h":!0}),me(W)!=="svelte-jycb7u"&&(W.textContent=M),d=N($e),x=T($e,"SPAN",{class:!0});var Pe=A(x);_e=G(Pe,oe),Pe.forEach(m),$e.forEach(m),we=N(O),F=T(O,"DIV",{});var Oe=A(F);ae=T(Oe,"SPAN",{class:!0});var de=A(ae);Ie=G(de,ue),ze=G(de,"°"),de.forEach(m),se=T(Oe,"BR",{}),ne=T(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),me(ne)!=="svelte-1ximvx8"&&(ne.textContent=re),Oe.forEach(m),fe=N(O),ke=T(O,"DIV",{}),A(ke).forEach(m),ve=N(O),be=T(O,"DIV",{});var Se=A(be);ge=T(Se,"SPAN",{class:!0,"data-svelte-h":!0}),me(ge)!=="svelte-1bfl0cx"&&(ge.textContent=Ne),xe=T(Se,"BR",{}),he=T(Se,"SPAN",{class:!0});var Ge=A(he);Ce=G(Ge,Ve),Fe=G(Ge,"°"),Ge.forEach(m),Se.forEach(m),ce=N(O),De=T(O,"DIV",{}),A(De).forEach(m),O.forEach(m),Me=N(L),Z(Te.$$.fragment,L),L.forEach(m),this.h()},h(){k(s,"class","font-bold text-label svelte-184ua4x"),k(f,"class","font-medium text-zinc-300"),k(P,"class","font-bold text-label svelte-184ua4x"),k(S,"class","font-medium text-zinc-300"),k(W,"class","font-bold text-label svelte-184ua4x"),k(x,"class","font-medium text-zinc-300"),k(ae,"class","font-bold text-label svelte-184ua4x"),k(ne,"class","font-medium text-zinc-300"),k(ge,"class","font-medium text-zinc-300"),k(he,"class","font-bold text-label svelte-184ua4x"),k(t,"class","grid grid-cols-3 grid-rows-3 text-zinc-200 text-center text-sm"),k(e,"class","bg-box grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-4 text-zinc-200 svelte-184ua4x")},m(X,L){E(X,e,L),b(e,t),b(t,a),b(t,n),b(t,o),b(o,s),b(s,l),b(s,r),b(o,u),b(o,f),b(t,p),b(t,h),b(t,R),b(t,j),b(j,P),b(P,v),b(P,C),b(j,B),b(j,S),b(t,ee),b(t,Q),b(Q,W),b(Q,d),b(Q,x),b(x,_e),b(t,we),b(t,F),b(F,ae),b(ae,Ie),b(ae,ze),b(F,se),b(F,ne),b(t,fe),b(t,ke),b(t,ve),b(t,be),b(be,ge),b(be,xe),b(be,he),b(he,Ce),b(he,Fe),b(t,ce),b(t,De),b(e,Me),K(Te,e,null),pe=!0},p(X,L){(!pe||L&1)&&_!==(_=qe(X[0].metadata.file.geospatial_lat_max,4)+"")&&je(l,_),(!pe||L&1)&&g!==(g=qe(X[0].metadata.file.geospatial_lon_min,4)+"")&&je(v,g),(!pe||L&1)&&oe!==(oe=X[0].metadata.file.nominal_resolution+"")&&je(_e,oe),(!pe||L&1)&&ue!==(ue=qe(X[0].metadata.file.geospatial_lon_max,4)+"")&&je(Ie,ue),(!pe||L&1)&&Ve!==(Ve=qe(X[0].metadata.file.geospatial_lat_min,4)+"")&&je(Ce,Ve);const O={};L&1&&(O.extent=[X[0].metadata.file.geospatial_lon_min,X[0].metadata.file.geospatial_lat_min,X[0].metadata.file.geospatial_lon_max,X[0].metadata.file.geospatial_lat_max]),Te.$set(O)},i(X){pe||($(Te.$$.fragment,X),pe=!0)},o(X){w(Te.$$.fragment,X),pe=!1},d(X){X&&m(e),q(Te)}}}function va(i){let e,t="Other Metadata";return{c(){e=y("span"),e.textContent=t},l(a){e=T(a,"SPAN",{"data-svelte-h":!0}),me(e)!=="svelte-14jvd71"&&(e.textContent=t)},m(a,n){E(a,e,n)},p:te,d(a){a&&m(e)}}}function ba(i){let e;return{c(){e=U("Related Datasets")},l(t){e=G(t,"Related Datasets")},m(t,a){E(t,e,a)},d(t){t&&m(e)}}}function ha(i){let e;return{c(){e=U("Provenance")},l(t){e=G(t,"Provenance")},m(t,a){E(t,e,a)},d(t){t&&m(e)}}}function mt(i){let e,t,a;function n(s){i[24](s)}let o={name:"tab4",value:3,$$slots:{default:[$a]},$$scope:{ctx:i}};return i[5]!==void 0&&(o.group=i[5]),e=new Be({props:o}),ye.push(()=>Re(e,"group",n)),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,_){K(e,s,_),a=!0},p(s,_){const l={};_&33554432&&(l.$$scope={dirty:_,ctx:s}),!t&&_&32&&(t=!0,l.group=s[5],Ee(()=>t=!1)),e.$set(l)},i(s){a||($(e.$$.fragment,s),a=!0)},o(s){w(e.$$.fragment,s),a=!1},d(s){q(e,s)}}}function $a(i){let e;return{c(){e=U("Map")},l(t){e=G(t,"Map")},m(t,a){E(t,e,a)},d(t){t&&m(e)}}}function wa(i){let e,t,a,n,o,s,_,l,r,u,f;function c(v){i[21](v)}let p={name:"tab1",value:0,$$slots:{default:[va]},$$scope:{ctx:i}};i[5]!==void 0&&(p.group=i[5]),e=new Be({props:p}),ye.push(()=>Re(e,"group",c));function h(v){i[22](v)}let R={name:"tab1",value:1,$$slots:{default:[ba]},$$scope:{ctx:i}};i[5]!==void 0&&(R.group=i[5]),n=new Be({props:R}),ye.push(()=>Re(n,"group",h));function j(v){i[23](v)}let P={name:"tab2",value:2,$$slots:{default:[ha]},$$scope:{ctx:i}};i[5]!==void 0&&(P.group=i[5]),_=new Be({props:P}),ye.push(()=>Re(_,"group",j));let g=i[0].tif_convertable&&mt(i);return{c(){Y(e.$$.fragment),a=D(),Y(n.$$.fragment),s=D(),Y(_.$$.fragment),r=D(),g&&g.c(),u=z()},l(v){Z(e.$$.fragment,v),a=N(v),Z(n.$$.fragment,v),s=N(v),Z(_.$$.fragment,v),r=N(v),g&&g.l(v),u=z()},m(v,C){K(e,v,C),E(v,a,C),K(n,v,C),E(v,s,C),K(_,v,C),E(v,r,C),g&&g.m(v,C),E(v,u,C),f=!0},p(v,C){const B={};C&33554432&&(B.$$scope={dirty:C,ctx:v}),!t&&C&32&&(t=!0,B.group=v[5],Ee(()=>t=!1)),e.$set(B);const S={};C&33554432&&(S.$$scope={dirty:C,ctx:v}),!o&&C&32&&(o=!0,S.group=v[5],Ee(()=>o=!1)),n.$set(S);const J={};C&33554432&&(J.$$scope={dirty:C,ctx:v}),!l&&C&32&&(l=!0,J.group=v[5],Ee(()=>l=!1)),_.$set(J),v[0].tif_convertable?g?(g.p(v,C),C&1&&$(g,1)):(g=mt(v),g.c(),$(g,1),g.m(u.parentNode,u)):g&&(le(),w(g,1,1,()=>{g=null}),ie())},i(v){f||($(e.$$.fragment,v),$(n.$$.fragment,v),$(_.$$.fragment,v),$(g),f=!0)},o(v){w(e.$$.fragment,v),w(n.$$.fragment,v),w(_.$$.fragment,v),w(g),f=!1},d(v){v&&(m(a),m(s),m(r),m(u)),q(e,v),q(n,v),q(_,v),g&&g.d(v)}}}function ka(i){let e,t,a=i[6]&&i[6]!=""&&gt(i);return{c(){a&&a.c(),e=z()},l(n){a&&a.l(n),e=z()},m(n,o){a&&a.m(n,o),E(n,e,o),t=!0},p(n,o){n[6]&&n[6]!=""?a?(a.p(n,o),o&64&&$(a,1)):(a=gt(n),a.c(),$(a,1),a.m(e.parentNode,e)):a&&(le(),w(a,1,1,()=>{a=null}),ie())},i(n){t||($(a),t=!0)},o(n){w(a),t=!1},d(n){n&&m(e),a&&a.d(n)}}}function Ca(i){let e,t,a,n;const o=[Ra,Ea],s=[];function _(l,r){return l[0].metadata_prov_exists&&l[0].metadata_show?0:1}return e=_(i),t=s[e]=o[e](i),{c(){t.c(),a=z()},l(l){t.l(l),a=z()},m(l,r){s[e].m(l,r),E(l,a,r),n=!0},p(l,r){let u=e;e=_(l),e===u?s[e].p(l,r):(le(),w(s[u],1,1,()=>{s[u]=null}),ie(),t=s[e],t?t.p(l,r):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(a.parentNode,a))},i(l){n||($(t),n=!0)},o(l){w(t),n=!1},d(l){l&&m(a),s[e].d(l)}}}function Ta(i){let e,t,a,n;const o=[Pa,Ia],s=[];function _(l,r){return l[0].metadata_prov_stats?0:1}return e=_(i),t=s[e]=o[e](i),{c(){t.c(),a=z()},l(l){t.l(l),a=z()},m(l,r){s[e].m(l,r),E(l,a,r),n=!0},p(l,r){let u=e;e=_(l),e===u?s[e].p(l,r):(le(),w(s[u],1,1,()=>{s[u]=null}),ie(),t=s[e],t?t.p(l,r):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(a.parentNode,a))},i(l){n||($(t),n=!0)},o(l){w(t),n=!1},d(l){l&&m(a),s[e].d(l)}}}function ya(i){let e,t,a,n;const o=[Da,Na],s=[];function _(l,r){return l[0].metadata_exists?0:1}return e=_(i),t=s[e]=o[e](i),{c(){t.c(),a=z()},l(l){t.l(l),a=z()},m(l,r){s[e].m(l,r),E(l,a,r),n=!0},p(l,r){let u=e;e=_(l),e===u?s[e].p(l,r):(le(),w(s[u],1,1,()=>{s[u]=null}),ie(),t=s[e],t?t.p(l,r):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(a.parentNode,a))},i(l){n||($(t),n=!0)},o(l){w(t),n=!1},d(l){l&&m(a),s[e].d(l)}}}function gt(i){let e=i[6],t,a,n=vt(i);return{c(){n.c(),t=z()},l(o){n.l(o),t=z()},m(o,s){n.m(o,s),E(o,t,s),a=!0},p(o,s){s&64&&He(e,e=o[6])?(le(),w(n,1,1,te),ie(),n=vt(o),n.c(),$(n,1),n.m(t.parentNode,t)):n.p(o,s)},i(o){a||($(n),a=!0)},o(o){w(n),a=!1},d(o){o&&m(t),n.d(o)}}}function vt(i){let e,t,a;function n(s){i[20](s)}let o={foldertype:i[1],show_varinfos:!1};return i[6]!==void 0&&(o.selected_file=i[6]),e=new It({props:o}),ye.push(()=>Re(e,"selected_file",n)),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,_){K(e,s,_),a=!0},p(s,_){const l={};_&2&&(l.foldertype=s[1]),!t&&_&64&&(t=!0,l.selected_file=s[6],Ee(()=>t=!1)),e.$set(l)},i(s){a||($(e.$$.fragment,s),a=!0)},o(s){w(e.$$.fragment,s),a=!1},d(s){q(e,s)}}}function Ea(i){let e;return{c(){e=U("currently no provenance data available")},l(t){e=G(t,"currently no provenance data available")},m(t,a){E(t,e,a)},p:te,i:te,o:te,d(t){t&&m(e)}}}function Ra(i){let e,t,a,n,o,s="provenance",_,l,r,u;a=new et({});let f=i[0].metadata_prov_stats&&bt(i);return{c(){e=y("button"),t=y("a"),Y(a.$$.fragment),n=D(),o=y("div"),o.textContent=s,l=D(),f&&f.c(),r=z(),this.h()},l(c){e=T(c,"BUTTON",{class:!0});var p=A(e);t=T(p,"A",{href:!0,class:!0,title:!0});var h=A(t);Z(a.$$.fragment,h),n=N(h),o=T(h,"DIV",{class:!0,"data-svelte-h":!0}),me(o)!=="svelte-19tiklx"&&(o.textContent=s),h.forEach(m),p.forEach(m),l=N(c),f&&f.l(c),r=z(),this.h()},h(){k(o,"class","ml-1 flex place-items-center justify-items-center"),k(t,"href",_=Le+"/climate/get_temp_file?name="+i[0].filename+"&type="+i[1]+"&filetype=prov"),k(t,"class","flex"),k(t,"title","Download metadata file"),k(e,"class","ml-2 mr-1 max-h-[33px] p-1 flex items-center justify-center variant-filled-tertiary hover:bg-tertiary-900 rounded-md")},m(c,p){E(c,e,p),b(e,t),K(a,t,null),b(t,n),b(t,o),E(c,l,p),f&&f.m(c,p),E(c,r,p),u=!0},p(c,p){(!u||p&3&&_!==(_=Le+"/climate/get_temp_file?name="+c[0].filename+"&type="+c[1]+"&filetype=prov"))&&k(t,"href",_),c[0].metadata_prov_stats?f?(f.p(c,p),p&1&&$(f,1)):(f=bt(c),f.c(),$(f,1),f.m(r.parentNode,r)):f&&(le(),w(f,1,1,()=>{f=null}),ie())},i(c){u||($(a.$$.fragment,c),$(f),u=!0)},o(c){w(a.$$.fragment,c),w(f),u=!1},d(c){c&&(m(e),m(l),m(r)),q(a),f&&f.d(c)}}}function bt(i){let e,t,a,n;function o(l){i[18](l)}function s(l){i[19](l)}let _={in_main_page:i[2]};return i[0].metadata_prov!==void 0&&(_.metadata_prov=i[0].metadata_prov),i[0].metadata_prov_stats!==void 0&&(_.metadata_prov_stats=i[0].metadata_prov_stats),e=new At({props:_}),ye.push(()=>Re(e,"metadata_prov",o)),ye.push(()=>Re(e,"metadata_prov_stats",s)),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,r){K(e,l,r),n=!0},p(l,r){const u={};r&4&&(u.in_main_page=l[2]),!t&&r&1&&(t=!0,u.metadata_prov=l[0].metadata_prov,Ee(()=>t=!1)),!a&&r&1&&(a=!0,u.metadata_prov_stats=l[0].metadata_prov_stats,Ee(()=>a=!1)),e.$set(u)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){w(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Ia(i){let e;return{c(){e=U("currently no related datasets available")},l(t){e=G(t,"currently no related datasets available")},m(t,a){E(t,e,a)},p:te,i:te,o:te,d(t){t&&m(e)}}}function Pa(i){var R,j,P;let e,t,a="ℹ️ Available files based on this file",n,o,s,_,l,r="ℹ️ Available files used to create this file",u,f,c,p,h;return o=new Ye({props:{data:(R=i[0].metadata_prov_stats)==null?void 0:R.base_for_entities,only_links:!0,in_main_page:i[2]}}),f=new Ye({props:{data:(j=i[0].metadata_prov_stats)==null?void 0:j.source_entities,only_links:!0,in_main_page:i[2]}}),p=new Ye({props:{data:(P=i[0].metadata_prov_stats)==null?void 0:P.result_entities,only_links:!0,in_main_page:i[2]}}),{c(){e=y("div"),t=y("h2"),t.textContent=a,n=D(),Y(o.$$.fragment),s=D(),_=y("div"),l=y("h2"),l.textContent=r,u=D(),Y(f.$$.fragment),c=D(),Y(p.$$.fragment),this.h()},l(g){e=T(g,"DIV",{class:!0,id:!0});var v=A(e);t=T(v,"H2",{class:!0,"data-svelte-h":!0}),me(t)!=="svelte-n9z7mk"&&(t.textContent=a),n=N(v),Z(o.$$.fragment,v),v.forEach(m),s=N(g),_=T(g,"DIV",{class:!0,id:!0});var C=A(_);l=T(C,"H2",{class:!0,"data-svelte-h":!0}),me(l)!=="svelte-1bmg2za"&&(l.textContent=r),u=N(C),Z(f.$$.fragment,C),c=N(C),Z(p.$$.fragment,C),C.forEach(m),this.h()},h(){k(t,"class","text-lg font-semibold mb-3 flex items-center gap-2 text-white"),k(e,"class","bg-box svelte-184ua4x"),k(e,"id","base_for_entities_"+i[7]),k(l,"class","text-lg font-semibold mb-3 flex items-center gap-2 text-white"),k(_,"class","bg-box svelte-184ua4x"),k(_,"id","base_for_entities_"+i[7])},m(g,v){E(g,e,v),b(e,t),b(e,n),K(o,e,null),E(g,s,v),E(g,_,v),b(_,l),b(_,u),K(f,_,null),b(_,c),K(p,_,null),h=!0},p(g,v){var J,ee,Q;const C={};v&1&&(C.data=(J=g[0].metadata_prov_stats)==null?void 0:J.base_for_entities),v&4&&(C.in_main_page=g[2]),o.$set(C);const B={};v&1&&(B.data=(ee=g[0].metadata_prov_stats)==null?void 0:ee.source_entities),v&4&&(B.in_main_page=g[2]),f.$set(B);const S={};v&1&&(S.data=(Q=g[0].metadata_prov_stats)==null?void 0:Q.result_entities),v&4&&(S.in_main_page=g[2]),p.$set(S)},i(g){h||($(o.$$.fragment,g),$(f.$$.fragment,g),$(p.$$.fragment,g),h=!0)},o(g){w(o.$$.fragment,g),w(f.$$.fragment,g),w(p.$$.fragment,g),h=!1},d(g){g&&(m(e),m(s),m(_)),q(o),q(f),q(p)}}}function Na(i){let e;return{c(){e=U("currently no metadata available")},l(t){e=G(t,"currently no metadata available")},m(t,a){E(t,e,a)},p:te,i:te,o:te,d(t){t&&m(e)}}}function Da(i){let e,t,a,n,o,s="metadata",_,l,r,u;a=new et({});let f=i[0].metadata&&i[0].metadata_show&&ht(i);return{c(){e=y("button"),t=y("a"),Y(a.$$.fragment),n=D(),o=y("div"),o.textContent=s,l=D(),f&&f.c(),r=z(),this.h()},l(c){e=T(c,"BUTTON",{class:!0});var p=A(e);t=T(p,"A",{href:!0,class:!0,title:!0});var h=A(t);Z(a.$$.fragment,h),n=N(h),o=T(h,"DIV",{class:!0,"data-svelte-h":!0}),me(o)!=="svelte-xp3lgr"&&(o.textContent=s),h.forEach(m),p.forEach(m),l=N(c),f&&f.l(c),r=z(),this.h()},h(){k(o,"class","ml-1 flex place-items-center justify-items-center"),k(t,"href",_=Le+"/climate/get_temp_file?name="+i[0].filename+"&type="+i[1]+"&filetype=meta"),k(t,"class","flex"),k(t,"title","Download metadata file"),k(e,"class","ml-2 mr-1 max-h-[33px] p-1 flex items-center justify-center variant-filled-tertiary hover:bg-tertiary-900 rounded-md")},m(c,p){E(c,e,p),b(e,t),K(a,t,null),b(t,n),b(t,o),E(c,l,p),f&&f.m(c,p),E(c,r,p),u=!0},p(c,p){(!u||p&3&&_!==(_=Le+"/climate/get_temp_file?name="+c[0].filename+"&type="+c[1]+"&filetype=meta"))&&k(t,"href",_),c[0].metadata&&c[0].metadata_show?f?(f.p(c,p),p&1&&$(f,1)):(f=ht(c),f.c(),$(f,1),f.m(r.parentNode,r)):f&&(le(),w(f,1,1,()=>{f=null}),ie())},i(c){u||($(a.$$.fragment,c),$(f),u=!0)},o(c){w(a.$$.fragment,c),w(f),u=!1},d(c){c&&(m(e),m(l),m(r)),q(a),f&&f.d(c)}}}function ht(i){let e,t;return e=new Dt({props:{data:i[0].metadata,in_main_page:i[2]}}),{c(){Y(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,n){K(e,a,n),t=!0},p(a,n){const o={};n&1&&(o.data=a[0].metadata),n&4&&(o.in_main_page=a[2]),e.$set(o)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){q(e,a)}}}function Aa(i){let e,t,a,n;const o=[ya,Ta,Ca,ka],s=[];function _(l,r){return l[5]===0?0:l[5]===1?1:l[5]===2?2:l[5]===3?3:-1}return~(e=_(i))&&(t=s[e]=o[e](i)),{c(){t&&t.c(),a=z()},l(l){t&&t.l(l),a=z()},m(l,r){~e&&s[e].m(l,r),E(l,a,r),n=!0},p(l,r){let u=e;e=_(l),e===u?~e&&s[e].p(l,r):(t&&(le(),w(s[u],1,1,()=>{s[u]=null}),ie()),~e?(t=s[e],t?t.p(l,r):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(a.parentNode,a)):t=null)},i(l){n||($(t),n=!0)},o(l){w(t),n=!1},d(l){l&&m(a),~e&&s[e].d(l)}}}function Sa(i){let e,t="Metadata";return{c(){e=y("span"),e.textContent=t},l(a){e=T(a,"SPAN",{"data-svelte-h":!0}),me(e)!=="svelte-myby7z"&&(e.textContent=t)},m(a,n){E(a,e,n)},p:te,d(a){a&&m(e)}}}function xa(i){let e;return{c(){e=U("Related Datasets")},l(t){e=G(t,"Related Datasets")},m(t,a){E(t,e,a)},d(t){t&&m(e)}}}function Va(i){let e;return{c(){e=U("Provenance")},l(t){e=G(t,"Provenance")},m(t,a){E(t,e,a)},d(t){t&&m(e)}}}function ja(i){let e;return{c(){e=U("Citation")},l(t){e=G(t,"Citation")},m(t,a){E(t,e,a)},d(t){t&&m(e)}}}function $t(i){let e,t,a;function n(s){i[16](s)}let o={name:"tab4",value:4,$$slots:{default:[za]},$$scope:{ctx:i}};return i[5]!==void 0&&(o.group=i[5]),e=new Be({props:o}),ye.push(()=>Re(e,"group",n)),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,_){K(e,s,_),a=!0},p(s,_){const l={};_&33554432&&(l.$$scope={dirty:_,ctx:s}),!t&&_&32&&(t=!0,l.group=s[5],Ee(()=>t=!1)),e.$set(l)},i(s){a||($(e.$$.fragment,s),a=!0)},o(s){w(e.$$.fragment,s),a=!1},d(s){q(e,s)}}}function za(i){let e;return{c(){e=U("Map")},l(t){e=G(t,"Map")},m(t,a){E(t,e,a)},d(t){t&&m(e)}}}function Ma(i){let e,t,a,n,o,s,_,l,r,u,f,c,p,h,R,j,P,g;function v(d){i[12](d)}let C={name:"tab1",value:0,$$slots:{default:[Sa]},$$scope:{ctx:i}};i[5]!==void 0&&(C.group=i[5]),e=new Be({props:C}),ye.push(()=>Re(e,"group",v));function B(d){i[13](d)}let S={name:"tab1",value:1,$$slots:{default:[xa]},$$scope:{ctx:i}};i[5]!==void 0&&(S.group=i[5]),n=new Be({props:S}),ye.push(()=>Re(n,"group",B));function J(d){i[14](d)}let ee={name:"tab2",value:2,$$slots:{default:[Va]},$$scope:{ctx:i}};i[5]!==void 0&&(ee.group=i[5]),_=new Be({props:ee}),ye.push(()=>Re(_,"group",J));function Q(d){i[15](d)}let W={name:"tab3",value:3,$$slots:{default:[ja]},$$scope:{ctx:i}};i[5]!==void 0&&(W.group=i[5]),u=new Be({props:W}),ye.push(()=>Re(u,"group",Q));let M=i[0].tif_convertable&&$t(i);return{c(){Y(e.$$.fragment),a=D(),Y(n.$$.fragment),s=D(),Y(_.$$.fragment),r=D(),Y(u.$$.fragment),c=D(),M&&M.c(),p=D(),h=y("div"),R=y("a"),j=U("File Information View"),this.h()},l(d){Z(e.$$.fragment,d),a=N(d),Z(n.$$.fragment,d),s=N(d),Z(_.$$.fragment,d),r=N(d),Z(u.$$.fragment,d),c=N(d),M&&M.l(d),p=N(d),h=T(d,"DIV",{class:!0});var x=A(h);R=T(x,"A",{href:!0,class:!0,style:!0});var oe=A(R);j=G(oe,"File Information View"),oe.forEach(m),x.forEach(m),this.h()},h(){k(R,"href",P="/file_info?type="+i[1]+"&filename="+i[0].filename),k(R,"class","px-3 p-1 py-1 bg-blue-500 text-white rounded hover:bg-blue-600"),Xe(R,"margin-top","5px"),Xe(R,"margin-right","2px"),Xe(R,"margin-left","auto"),Xe(R,"display","block"),Xe(R,"width","max-content"),k(h,"class","ml-auto")},m(d,x){K(e,d,x),E(d,a,x),K(n,d,x),E(d,s,x),K(_,d,x),E(d,r,x),K(u,d,x),E(d,c,x),M&&M.m(d,x),E(d,p,x),E(d,h,x),b(h,R),b(R,j),g=!0},p(d,x){const oe={};x&33554432&&(oe.$$scope={dirty:x,ctx:d}),!t&&x&32&&(t=!0,oe.group=d[5],Ee(()=>t=!1)),e.$set(oe);const _e={};x&33554432&&(_e.$$scope={dirty:x,ctx:d}),!o&&x&32&&(o=!0,_e.group=d[5],Ee(()=>o=!1)),n.$set(_e);const we={};x&33554432&&(we.$$scope={dirty:x,ctx:d}),!l&&x&32&&(l=!0,we.group=d[5],Ee(()=>l=!1)),_.$set(we);const F={};x&33554432&&(F.$$scope={dirty:x,ctx:d}),!f&&x&32&&(f=!0,F.group=d[5],Ee(()=>f=!1)),u.$set(F),d[0].tif_convertable?M?(M.p(d,x),x&1&&$(M,1)):(M=$t(d),M.c(),$(M,1),M.m(p.parentNode,p)):M&&(le(),w(M,1,1,()=>{M=null}),ie()),(!g||x&3&&P!==(P="/file_info?type="+d[1]+"&filename="+d[0].filename))&&k(R,"href",P)},i(d){g||($(e.$$.fragment,d),$(n.$$.fragment,d),$(_.$$.fragment,d),$(u.$$.fragment,d),$(M),g=!0)},o(d){w(e.$$.fragment,d),w(n.$$.fragment,d),w(_.$$.fragment,d),w(u.$$.fragment,d),w(M),g=!1},d(d){d&&(m(a),m(s),m(r),m(c),m(p),m(h)),q(e,d),q(n,d),q(_,d),q(u,d),M&&M.d(d)}}}function La(i){let e,t,a=i[6]&&i[6]!=""&&wt(i);return{c(){a&&a.c(),e=z()},l(n){a&&a.l(n),e=z()},m(n,o){a&&a.m(n,o),E(n,e,o),t=!0},p(n,o){n[6]&&n[6]!=""?a?(a.p(n,o),o&64&&$(a,1)):(a=wt(n),a.c(),$(a,1),a.m(e.parentNode,e)):a&&(le(),w(a,1,1,()=>{a=null}),ie())},i(n){t||($(a),t=!0)},o(n){w(a),t=!1},d(n){n&&m(e),a&&a.d(n)}}}function Fa(i){let e,t,a=i[0].metadata&&i[0].metadata.file&&i[0].metadata_show&&Ct(i);return{c(){a&&a.c(),e=z()},l(n){a&&a.l(n),e=z()},m(n,o){a&&a.m(n,o),E(n,e,o),t=!0},p(n,o){n[0].metadata&&n[0].metadata.file&&n[0].metadata_show?a?(a.p(n,o),o&1&&$(a,1)):(a=Ct(n),a.c(),$(a,1),a.m(e.parentNode,e)):a&&(le(),w(a,1,1,()=>{a=null}),ie())},i(n){t||($(a),t=!0)},o(n){w(a),t=!1},d(n){n&&m(e),a&&a.d(n)}}}function Oa(i){let e,t,a,n;const o=[qa,Ua],s=[];function _(l,r){return l[0].metadata_prov_exists&&l[0].metadata_show?0:1}return e=_(i),t=s[e]=o[e](i),{c(){t.c(),a=z()},l(l){t.l(l),a=z()},m(l,r){s[e].m(l,r),E(l,a,r),n=!0},p(l,r){let u=e;e=_(l),e===u?s[e].p(l,r):(le(),w(s[u],1,1,()=>{s[u]=null}),ie(),t=s[e],t?t.p(l,r):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(a.parentNode,a))},i(l){n||($(t),n=!0)},o(l){w(t),n=!1},d(l){l&&m(a),s[e].d(l)}}}function Ba(i){let e,t,a,n;const o=[Za,Ka],s=[];function _(l,r){return l[0].metadata_prov_stats?0:1}return e=_(i),t=s[e]=o[e](i),{c(){t.c(),a=z()},l(l){t.l(l),a=z()},m(l,r){s[e].m(l,r),E(l,a,r),n=!0},p(l,r){let u=e;e=_(l),e===u?s[e].p(l,r):(le(),w(s[u],1,1,()=>{s[u]=null}),ie(),t=s[e],t?t.p(l,r):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(a.parentNode,a))},i(l){n||($(t),n=!0)},o(l){w(t),n=!1},d(l){l&&m(a),s[e].d(l)}}}function Ga(i){let e,t,a,n;const o=[Xa,Ya],s=[];function _(l,r){return l[0].metadata_exists?0:1}return e=_(i),t=s[e]=o[e](i),{c(){t.c(),a=z()},l(l){t.l(l),a=z()},m(l,r){s[e].m(l,r),E(l,a,r),n=!0},p(l,r){let u=e;e=_(l),e===u?s[e].p(l,r):(le(),w(s[u],1,1,()=>{s[u]=null}),ie(),t=s[e],t?t.p(l,r):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(a.parentNode,a))},i(l){n||($(t),n=!0)},o(l){w(t),n=!1},d(l){l&&m(a),s[e].d(l)}}}function wt(i){let e=i[6],t,a,n=kt(i);return{c(){n.c(),t=z()},l(o){n.l(o),t=z()},m(o,s){n.m(o,s),E(o,t,s),a=!0},p(o,s){s&64&&He(e,e=o[6])?(le(),w(n,1,1,te),ie(),n=kt(o),n.c(),$(n,1),n.m(t.parentNode,t)):n.p(o,s)},i(o){a||($(n),a=!0)},o(o){w(n),a=!1},d(o){o&&m(t),n.d(o)}}}function kt(i){let e,t,a;function n(s){i[11](s)}let o={foldertype:i[1],show_varinfos:!1};return i[6]!==void 0&&(o.selected_file=i[6]),e=new It({props:o}),ye.push(()=>Re(e,"selected_file",n)),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,_){K(e,s,_),a=!0},p(s,_){const l={};_&2&&(l.foldertype=s[1]),!t&&_&64&&(t=!0,l.selected_file=s[6],Ee(()=>t=!1)),e.$set(l)},i(s){a||($(e.$$.fragment,s),a=!0)},o(s){w(e.$$.fragment,s),a=!1},d(s){q(e,s)}}}function Ct(i){let e,t;return e=new Nt({props:{file:i[0].metadata.file}}),{c(){Y(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,n){K(e,a,n),t=!0},p(a,n){const o={};n&1&&(o.file=a[0].metadata.file),e.$set(o)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){q(e,a)}}}function Ua(i){let e;return{c(){e=U("currently no provenance data available")},l(t){e=G(t,"currently no provenance data available")},m(t,a){E(t,e,a)},p:te,i:te,o:te,d(t){t&&m(e)}}}function qa(i){let e,t,a,n,o,s="provenance",_,l,r,u;a=new et({});let f=i[0].metadata_prov_stats&&Tt(i);return{c(){e=y("button"),t=y("a"),Y(a.$$.fragment),n=D(),o=y("div"),o.textContent=s,l=D(),f&&f.c(),r=z(),this.h()},l(c){e=T(c,"BUTTON",{class:!0});var p=A(e);t=T(p,"A",{href:!0,class:!0,title:!0});var h=A(t);Z(a.$$.fragment,h),n=N(h),o=T(h,"DIV",{class:!0,"data-svelte-h":!0}),me(o)!=="svelte-19tiklx"&&(o.textContent=s),h.forEach(m),p.forEach(m),l=N(c),f&&f.l(c),r=z(),this.h()},h(){k(o,"class","ml-1 flex place-items-center justify-items-center"),k(t,"href",_=Le+"/climate/get_temp_file?name="+i[0].filename+"&type="+i[1]+"&filetype=prov"),k(t,"class","flex"),k(t,"title","Download metadata file"),k(e,"class","ml-2 mr-1 max-h-[33px] p-1 flex items-center justify-center variant-filled-tertiary hover:bg-tertiary-900 rounded-md")},m(c,p){E(c,e,p),b(e,t),K(a,t,null),b(t,n),b(t,o),E(c,l,p),f&&f.m(c,p),E(c,r,p),u=!0},p(c,p){(!u||p&3&&_!==(_=Le+"/climate/get_temp_file?name="+c[0].filename+"&type="+c[1]+"&filetype=prov"))&&k(t,"href",_),c[0].metadata_prov_stats?f?(f.p(c,p),p&1&&$(f,1)):(f=Tt(c),f.c(),$(f,1),f.m(r.parentNode,r)):f&&(le(),w(f,1,1,()=>{f=null}),ie())},i(c){u||($(a.$$.fragment,c),$(f),u=!0)},o(c){w(a.$$.fragment,c),w(f),u=!1},d(c){c&&(m(e),m(l),m(r)),q(a),f&&f.d(c)}}}function Tt(i){let e,t,a,n;function o(l){i[9](l)}function s(l){i[10](l)}let _={in_main_page:i[2]};return i[0].metadata_prov!==void 0&&(_.metadata_prov=i[0].metadata_prov),i[0].metadata_prov_stats!==void 0&&(_.metadata_prov_stats=i[0].metadata_prov_stats),e=new At({props:_}),ye.push(()=>Re(e,"metadata_prov",o)),ye.push(()=>Re(e,"metadata_prov_stats",s)),{c(){Y(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,r){K(e,l,r),n=!0},p(l,r){const u={};r&4&&(u.in_main_page=l[2]),!t&&r&1&&(t=!0,u.metadata_prov=l[0].metadata_prov,Ee(()=>t=!1)),!a&&r&1&&(a=!0,u.metadata_prov_stats=l[0].metadata_prov_stats,Ee(()=>a=!1)),e.$set(u)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){w(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Ka(i){let e;return{c(){e=U("currently no related datasets available")},l(t){e=G(t,"currently no related datasets available")},m(t,a){E(t,e,a)},p:te,i:te,o:te,d(t){t&&m(e)}}}function Za(i){var R,j,P;let e,t,a="ℹ️ Available files based on this file",n,o,s,_,l,r="ℹ️ Available files used to create this file",u,f,c,p,h;return o=new Ye({props:{data:(R=i[0].metadata_prov_stats)==null?void 0:R.base_for_entities,only_links:!0,in_main_page:i[2]}}),f=new Ye({props:{data:(j=i[0].metadata_prov_stats)==null?void 0:j.source_entities,only_links:!0,in_main_page:i[2]}}),p=new Ye({props:{data:(P=i[0].metadata_prov_stats)==null?void 0:P.result_entities,only_links:!0,in_main_page:i[2]}}),{c(){e=y("div"),t=y("h2"),t.textContent=a,n=D(),Y(o.$$.fragment),s=D(),_=y("div"),l=y("h2"),l.textContent=r,u=D(),Y(f.$$.fragment),c=D(),Y(p.$$.fragment),this.h()},l(g){e=T(g,"DIV",{class:!0,id:!0});var v=A(e);t=T(v,"H2",{class:!0,"data-svelte-h":!0}),me(t)!=="svelte-n9z7mk"&&(t.textContent=a),n=N(v),Z(o.$$.fragment,v),v.forEach(m),s=N(g),_=T(g,"DIV",{class:!0,id:!0});var C=A(_);l=T(C,"H2",{class:!0,"data-svelte-h":!0}),me(l)!=="svelte-1bmg2za"&&(l.textContent=r),u=N(C),Z(f.$$.fragment,C),c=N(C),Z(p.$$.fragment,C),C.forEach(m),this.h()},h(){k(t,"class","text-lg font-semibold mb-3 flex items-center gap-2 text-white"),k(e,"class","bg-box svelte-184ua4x"),k(e,"id","base_for_entities_"+i[7]),k(l,"class","text-lg font-semibold mb-3 flex items-center gap-2 text-white"),k(_,"class","bg-box svelte-184ua4x"),k(_,"id","base_for_entities_"+i[7])},m(g,v){E(g,e,v),b(e,t),b(e,n),K(o,e,null),E(g,s,v),E(g,_,v),b(_,l),b(_,u),K(f,_,null),b(_,c),K(p,_,null),h=!0},p(g,v){var J,ee,Q;const C={};v&1&&(C.data=(J=g[0].metadata_prov_stats)==null?void 0:J.base_for_entities),v&4&&(C.in_main_page=g[2]),o.$set(C);const B={};v&1&&(B.data=(ee=g[0].metadata_prov_stats)==null?void 0:ee.source_entities),v&4&&(B.in_main_page=g[2]),f.$set(B);const S={};v&1&&(S.data=(Q=g[0].metadata_prov_stats)==null?void 0:Q.result_entities),v&4&&(S.in_main_page=g[2]),p.$set(S)},i(g){h||($(o.$$.fragment,g),$(f.$$.fragment,g),$(p.$$.fragment,g),h=!0)},o(g){w(o.$$.fragment,g),w(f.$$.fragment,g),w(p.$$.fragment,g),h=!1},d(g){g&&(m(e),m(s),m(_)),q(o),q(f),q(p)}}}function Ya(i){let e;return{c(){e=U("currently no metadata available")},l(t){e=G(t,"currently no metadata available")},m(t,a){E(t,e,a)},p:te,i:te,o:te,d(t){t&&m(e)}}}function Xa(i){let e,t,a,n,o,s="metadata",_,l,r,u;a=new et({});let f=i[0].metadata&&i[0].metadata_show&&yt(i);return{c(){e=y("button"),t=y("a"),Y(a.$$.fragment),n=D(),o=y("div"),o.textContent=s,l=D(),f&&f.c(),r=z(),this.h()},l(c){e=T(c,"BUTTON",{class:!0});var p=A(e);t=T(p,"A",{href:!0,class:!0,title:!0});var h=A(t);Z(a.$$.fragment,h),n=N(h),o=T(h,"DIV",{class:!0,"data-svelte-h":!0}),me(o)!=="svelte-xp3lgr"&&(o.textContent=s),h.forEach(m),p.forEach(m),l=N(c),f&&f.l(c),r=z(),this.h()},h(){k(o,"class","ml-1 flex place-items-center justify-items-center"),k(t,"href",_=Le+"/climate/get_temp_file?name="+i[0].filename+"&type="+i[1]+"&filetype=meta"),k(t,"class","flex"),k(t,"title","Download metadata file"),k(e,"class","ml-2 mr-1 max-h-[33px] p-1 flex items-center justify-center variant-filled-tertiary hover:bg-tertiary-900 rounded-md")},m(c,p){E(c,e,p),b(e,t),K(a,t,null),b(t,n),b(t,o),E(c,l,p),f&&f.m(c,p),E(c,r,p),u=!0},p(c,p){(!u||p&3&&_!==(_=Le+"/climate/get_temp_file?name="+c[0].filename+"&type="+c[1]+"&filetype=meta"))&&k(t,"href",_),c[0].metadata&&c[0].metadata_show?f?(f.p(c,p),p&1&&$(f,1)):(f=yt(c),f.c(),$(f,1),f.m(r.parentNode,r)):f&&(le(),w(f,1,1,()=>{f=null}),ie())},i(c){u||($(a.$$.fragment,c),$(f),u=!0)},o(c){w(a.$$.fragment,c),w(f),u=!1},d(c){c&&(m(e),m(l),m(r)),q(a),f&&f.d(c)}}}function yt(i){let e,t;return e=new Dt({props:{data:i[0].metadata}}),{c(){Y(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,n){K(e,a,n),t=!0},p(a,n){const o={};n&1&&(o.data=a[0].metadata),e.$set(o)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){q(e,a)}}}function Ha(i){let e,t,a,n;const o=[Ga,Ba,Oa,Fa,La],s=[];function _(l,r){return l[5]===0?0:l[5]===1?1:l[5]===2?2:l[5]===3?3:l[5]===4?4:-1}return~(e=_(i))&&(t=s[e]=o[e](i)),{c(){t&&t.c(),a=z()},l(l){t&&t.l(l),a=z()},m(l,r){~e&&s[e].m(l,r),E(l,a,r),n=!0},p(l,r){let u=e;e=_(l),e===u?~e&&s[e].p(l,r):(t&&(le(),w(s[u],1,1,()=>{s[u]=null}),ie()),~e?(t=s[e],t?t.p(l,r):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(a.parentNode,a)):t=null)},i(l){n||($(t),n=!0)},o(l){w(t),n=!1},d(l){l&&m(a),~e&&s[e].d(l)}}}function Qa(i){let e,t,a,n;const o=[ga,ma],s=[];function _(l,r){return l[2]?0:1}return e=_(i),t=s[e]=o[e](i),{c(){t.c(),a=z()},l(l){t.l(l),a=z()},m(l,r){s[e].m(l,r),E(l,a,r),n=!0},p(l,[r]){let u=e;e=_(l),e===u?s[e].p(l,r):(le(),w(s[u],1,1,()=>{s[u]=null}),ie(),t=s[e],t?t.p(l,r):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(a.parentNode,a))},i(l){n||($(t),n=!0)},o(l){w(t),n=!1},d(l){l&&m(a),s[e].d(l)}}}function Wa(i,e,t){let a,{folder_data:n}=e,{file_obj:o}=e,{foldertype:s}=e,{in_main_page:_}=e,l=!0;o!=null&&(n=n[o.index]);let r="No description available";if(!_)try{r=_a(n.filename,s,n.metadata)}catch(d){console.log(d)}let u=Math.random().toString(36).substring(2,15),f=n.tabset;function c(d){i.$$.not_equal(n.metadata_prov,d)&&(n.metadata_prov=d,t(0,n))}function p(d){i.$$.not_equal(n.metadata_prov_stats,d)&&(n.metadata_prov_stats=d,t(0,n))}function h(d){a=d,t(6,a),t(0,n)}function R(d){f=d,t(5,f)}function j(d){f=d,t(5,f)}function P(d){f=d,t(5,f)}function g(d){f=d,t(5,f)}function v(d){f=d,t(5,f)}const C=()=>t(3,l=!l);function B(d){i.$$.not_equal(n.metadata_prov,d)&&(n.metadata_prov=d,t(0,n))}function S(d){i.$$.not_equal(n.metadata_prov_stats,d)&&(n.metadata_prov_stats=d,t(0,n))}function J(d){a=d,t(6,a),t(0,n)}function ee(d){f=d,t(5,f)}function Q(d){f=d,t(5,f)}function W(d){f=d,t(5,f)}function M(d){f=d,t(5,f)}return i.$$set=d=>{"folder_data"in d&&t(0,n=d.folder_data),"file_obj"in d&&t(8,o=d.file_obj),"foldertype"in d&&t(1,s=d.foldertype),"in_main_page"in d&&t(2,_=d.in_main_page)},i.$$.update=()=>{i.$$.dirty&1&&t(6,a=n.filename)},[n,s,_,l,r,f,a,u,o,c,p,h,R,j,P,g,v,C,B,S,J,ee,Q,W,M]}class Ja extends tt{constructor(e){super(),at(this,e,Wa,Qa,He,{folder_data:0,file_obj:8,foldertype:1,in_main_page:2})}}function Et(i){let e,t;return e=new Ja({props:{folder_data:i[0],file_obj:St,foldertype:i[1],in_main_page:tn}}),{c(){Y(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,n){K(e,a,n),t=!0},p(a,n){const o={};n&1&&(o.folder_data=a[0]),n&2&&(o.foldertype=a[1]),e.$set(o)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){w(e.$$.fragment,a),t=!1},d(a){q(e,a)}}}function en(i){let e,t,a=i[0]&&i[0].metadata&&Et(i);return{c(){e=y("div"),a&&a.c(),this.h()},l(n){e=T(n,"DIV",{class:!0});var o=A(e);a&&a.l(o),o.forEach(m),this.h()},h(){k(e,"class","content-div")},m(n,o){E(n,e,o),a&&a.m(e,null),t=!0},p(n,[o]){n[0]&&n[0].metadata?a?(a.p(n,o),o&1&&$(a,1)):(a=Et(n),a.c(),$(a,1),a.m(e,null)):a&&(le(),w(a,1,1,()=>{a=null}),ie())},i(n){t||($(a),t=!0)},o(n){w(a),t=!1},d(n){n&&m(e),a&&a.d()}}}const St=null,tn=!1;function an(i,e,t){let a=[],n,o="",s="";async function _(r,u){t(0,n=await sa(r,u)),console.log(n),l(u,r)}async function l(r,u){console.log("get_metadata_and_prov",r,u,St),t(0,n.tabset=0,n);const f=await fetch(Le+"/climate/get_temp_file?name="+r+"&type="+u+"&filetype=meta",{method:"GET"});if(!f.ok)n.metadata||t(0,n.metadata={},n),t(0,n.metadata={"currently no metadata available":"for this file"},n),t(0,n.metadata_exists=!1,n),console.log(n.metadata);else{const h=await f.json();a=h,await Ke(),n.metadata||t(0,n.metadata={},n),t(0,n.metadata_exists=!0,n),t(0,n.metadata=h,n),await Ke(),console.log(a)}const c=await fetch(Le+"/climate/get_temp_file?name="+r+"&type="+u+"&filetype=prov",{method:"GET"});if(!c.ok)n.metadata_prov||t(0,n.metadata_prov={},n),t(0,n.metadata_prov_exists=!1,n),t(0,n.metadata_prov={"currently no provenance information available":"for this file"},n),console.log(n.metadata_prov);else{const h=await c.json();a=h,await Ke(),n.metadata_prov||t(0,n.metadata_prov={},n),t(0,n.metadata_prov_exists=!0,n),t(0,n.metadata_prov=h,n),await Ke(),console.log(a)}const p=await fetch(Le+"/climate/get_temp_file?name="+r+"&type="+u+"&filetype=prov_stats",{method:"GET"});if(!p.ok)n.metadata_prov_stats||t(0,n.metadata_prov_stats={},n),t(0,n.metadata_prov_stats_exists=!1,n),t(0,n.metadata_prov_stats={"currently no provenance information available":"for this file"},n),console.log(n.metadata_prov_stats);else{const h=await p.json();a=h,await Ke(),n.metadata_prov_stats||t(0,n.metadata_prov_stats={},n),t(0,n.metadata_prov_stats_exists=!0,n),t(0,n.metadata_prov_stats=h,n),await Ke(),console.log(a)}t(0,n.metadata_show=!0,n),history.pushState({},"","?type="+u+"&filename="+r)}Rt(()=>{_(o,s),console.log(n)});{const r=new URLSearchParams(window.location.search),u=r.get("type");u&&t(1,o=u);const f=r.get("filename");f&&(s=f)}return[n,o]}class _n extends tt{constructor(e){super(),at(this,e,an,en,He,{})}}export{_n as component};
