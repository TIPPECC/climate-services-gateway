import{s as ce,e as k,t as H,a as R,q as G,c as y,b as S,d as j,f as a,g as z,m as _,i as d,h as f,x as le,p as Q,n as J,r as ue,y as _e,l as K,o as de,j as $,z as pe,u as be}from"../chunks/scheduler.DbvQfQVF.js";import{e as ne}from"../chunks/each.BD2ZG6u7.js";import{S as ve,i as he}from"../chunks/index.BW8OJYk7.js";import{A as x}from"../chunks/app.config.BO6XNHuD.js";import{_ as ie}from"../chunks/fetch_folder_content.igWO_E5b.js";function se(s,t,e){const l=s.slice();return l[22]=t[e],l[24]=e,l}function me(s){let t,e="<p>Loading...</p>";return{c(){t=k("div"),t.innerHTML=e},l(l){t=y(l,"DIV",{"data-svelte-h":!0}),K(t)!=="svelte-1vs96ti"&&(t.innerHTML=e)},m(l,i){d(l,t,i)},p:J,d(l){l&&a(t)}}}function ke(s){let t,e,l="Filename",i,n,o="Filesize",V,v,M="Last modified",L,q,w="Download Link",F,p,D="Visualize",B,O,c,C="Generate Wget link for download",E,P,U=ne(Object.values(s[0].content)),T=[];for(let h=0;h<U.length;h+=1)T[h]=oe(se(s,U,h));return{c(){t=k("div"),e=k("div"),e.textContent=l,i=R(),n=k("div"),n.textContent=o,V=R(),v=k("div"),v.textContent=M,L=R(),q=k("div"),q.textContent=w,F=R(),p=k("div"),p.textContent=D,B=R();for(let h=0;h<T.length;h+=1)T[h].c();O=R(),c=k("button"),c.textContent=C,this.h()},l(h){t=y(h,"DIV",{class:!0});var N=S(t);e=y(N,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-32zc08"&&(e.textContent=l),i=z(N),n=y(N,"DIV",{"data-svelte-h":!0}),K(n)!=="svelte-1er2eqp"&&(n.textContent=o),V=z(N),v=y(N,"DIV",{"data-svelte-h":!0}),K(v)!=="svelte-8z07u1"&&(v.textContent=M),L=z(N),q=y(N,"DIV",{"data-svelte-h":!0}),K(q)!=="svelte-wyo69u"&&(q.textContent=w),F=z(N),p=y(N,"DIV",{"data-svelte-h":!0}),K(p)!=="svelte-1ni2m1o"&&(p.textContent=D),B=z(N);for(let m=0;m<T.length;m+=1)T[m].l(N);N.forEach(a),O=z(h),c=y(h,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(c)!=="svelte-y2sc8e"&&(c.textContent=C),this.h()},h(){_(e,"class","col-span-6"),_(t,"class","grid grid-cols-10"),_(c,"type","button"),_(c,"class","btn variant-ghost-primary")},m(h,N){d(h,t,N),f(t,e),f(t,i),f(t,n),f(t,V),f(t,v),f(t,L),f(t,q),f(t,F),f(t,p),f(t,B);for(let m=0;m<T.length;m+=1)T[m]&&T[m].m(t,null);d(h,O,N),d(h,c,N),E||(P=Q(c,"click",pe(s[7])),E=!0)},p(h,N){if(N&89){U=ne(Object.values(h[0].content));let m;for(m=0;m<U.length;m+=1){const A=se(h,U,m);T[m]?T[m].p(A,N):(T[m]=oe(A),T[m].c(),T[m].m(t,null))}for(;m<T.length;m+=1)T[m].d(1);T.length=U.length}},d(h){h&&(a(t),a(O),a(c)),be(T,h),E=!1,P()}}}function ae(s){let t,e,l,i=s[22][0]+"",n,o,V,v=s[22][1]+"",M,L,q,w=s[22][2]+"",F,p,D,B,O,c,C,E,P,U,T,h,N;function m(r,I){return r[22][3]&&!r[22][3].in_size_limit?Ce:ye}let A=m(s),g=A(s);function u(r,I){return r[22][3]?r[22][3].tif_cached?De:r[22][3].in_size_limit?we:ge:Ee}let b=u(s),W=b(s);return{c(){t=k("div"),e=k("input"),l=H(`
					 `),n=H(i),o=R(),V=k("div"),M=H(v),L=R(),q=k("div"),F=H(w),p=R(),D=k("div"),B=H(" "),O=k("a"),c=H("download"),E=R(),g.c(),P=R(),U=k("div"),W.c(),T=R(),this.h()},l(r){t=y(r,"DIV",{class:!0});var I=S(t);e=y(I,"INPUT",{type:!0,id:!0}),l=j(I,`
					 `),n=j(I,i),I.forEach(a),o=z(r),V=y(r,"DIV",{});var X=S(V);M=j(X,v),X.forEach(a),L=z(r),q=y(r,"DIV",{});var Y=S(q);F=j(Y,w),Y.forEach(a),p=z(r),D=y(r,"DIV",{});var Z=S(D);B=j(Z," "),O=y(Z,"A",{href:!0,class:!0});var te=S(O);c=j(te,"download"),te.forEach(a),E=z(Z),g.l(Z),Z.forEach(a),P=z(r),U=y(r,"DIV",{});var ee=S(U);W.l(ee),T=z(ee),ee.forEach(a),this.h()},h(){_(e,"type","checkbox"),e.value=s[24],_(e,"id","checkbox_"+s[24]),_(t,"class","col-span-6"),_(O,"href",C=x+"/climate/get_temp_file?name="+s[22][0]+"&type="+s[3]+"&filetype=nc"),_(O,"class","underline")},m(r,I){d(r,t,I),f(t,e),f(t,l),f(t,n),d(r,o,I),d(r,V,I),f(V,M),d(r,L,I),d(r,q,I),f(q,F),d(r,p,I),d(r,D,I),f(D,B),f(D,O),f(O,c),f(D,E),g.m(D,null),d(r,P,I),d(r,U,I),W.m(U,null),f(U,T),h||(N=Q(e,"change",s[6]),h=!0)},p(r,I){I&1&&i!==(i=r[22][0]+"")&&$(n,i),I&1&&v!==(v=r[22][1]+"")&&$(M,v),I&1&&w!==(w=r[22][2]+"")&&$(F,w),I&9&&C!==(C=x+"/climate/get_temp_file?name="+r[22][0]+"&type="+r[3]+"&filetype=nc")&&_(O,"href",C),A===(A=m(r))&&g?g.p(r,I):(g.d(1),g=A(r),g&&(g.c(),g.m(D,null))),b===(b=u(r))&&W?W.p(r,I):(W.d(1),W=b(r),W&&(W.c(),W.m(U,T)))},d(r){r&&(a(t),a(o),a(V),a(L),a(q),a(p),a(D),a(P),a(U)),g.d(),W.d(),h=!1,N()}}}function ye(s){let t,e,l,i;return{c(){t=H(" "),e=k("a"),l=H("download as tif"),this.h()},l(n){t=j(n," "),e=y(n,"A",{href:!0,class:!0});var o=S(e);l=j(o,"download as tif"),o.forEach(a),this.h()},h(){_(e,"href",i=x+"/climate/get_temp_file?name="+s[22][0]+"&type="+s[3]+"&filetype=tif"),_(e,"class","underline")},m(n,o){d(n,t,o),d(n,e,o),f(e,l)},p(n,o){o&9&&i!==(i=x+"/climate/get_temp_file?name="+n[22][0]+"&type="+n[3]+"&filetype=tif")&&_(e,"href",i)},d(n){n&&(a(t),a(e))}}}function Ce(s){let t;return{c(){t=H("tif not available")},l(e){t=j(e,"tif not available")},m(e,l){d(e,t,l)},p:J,d(e){e&&a(t)}}}function ge(s){let t;return{c(){t=H("Not Convertable")},l(e){t=j(e,"Not Convertable")},m(e,l){d(e,t,l)},p:J,d(e){e&&a(t)}}}function we(s){let t;function e(n,o){return n[22][3].tif_convertable?Ie:Te}let l=e(s),i=l(s);return{c(){i.c(),t=G()},l(n){i.l(n),t=G()},m(n,o){i.m(n,o),d(n,t,o)},p(n,o){l===(l=e(n))&&i?i.p(n,o):(i.d(1),i=l(n),i&&(i.c(),i.m(t.parentNode,t)))},d(n){n&&a(t),i.d(n)}}}function De(s){let t;return{c(){t=H("Mapview (tif)")},l(e){t=j(e,"Mapview (tif)")},m(e,l){d(e,t,l)},p:J,d(e){e&&a(t)}}}function Ee(s){let t;return{c(){t=H("Request Mapview (tif) [noFileData]")},l(e){t=j(e,"Request Mapview (tif) [noFileData]")},m(e,l){d(e,t,l)},p:J,d(e){e&&a(t)}}}function Te(s){let t;function e(n,o){return n[22][3].num_bands?Ne:Ve}let l=e(s),i=l(s);return{c(){i.c(),t=G()},l(n){i.l(n),t=G()},m(n,o){i.m(n,o),d(n,t,o)},p(n,o){l!==(l=e(n))&&(i.d(1),i=l(n),i&&(i.c(),i.m(t.parentNode,t)))},d(n){n&&a(t),i.d(n)}}}function Ie(s){let t;return{c(){t=H("Request Mapview (tif) [noTifFile]")},l(e){t=j(e,"Request Mapview (tif) [noTifFile]")},m(e,l){d(e,t,l)},p:J,d(e){e&&a(t)}}}function Ve(s){let t;return{c(){t=H("Request Mapview [noMetaData]")},l(e){t=j(e,"Request Mapview [noMetaData]")},m(e,l){d(e,t,l)},d(e){e&&a(t)}}}function Ne(s){let t;return{c(){t=H("Not Convertable")},l(e){t=j(e,"Not Convertable")},m(e,l){d(e,t,l)},d(e){e&&a(t)}}}function oe(s){let t=s[22][0].toLowerCase().includes(s[4].toLowerCase()),e,l=t&&ae(s);return{c(){l&&l.c(),e=G()},l(i){l&&l.l(i),e=G()},m(i,n){l&&l.m(i,n),d(i,e,n)},p(i,n){n&17&&(t=i[22][0].toLowerCase().includes(i[4].toLowerCase())),t?l?l.p(i,n):(l=ae(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(i){i&&a(e),l&&l.d(i)}}}function re(s){let t,e,l,i="<span>To download all objects using Wget:</span>",n,o,V,v,M,L="<span>Additional arguments:</span>",q,w,F;return{c(){t=k("div"),e=k("div"),l=k("div"),l.innerHTML=i,n=R(),o=k("span"),V=H(s[5]),v=R(),M=k("div"),M.innerHTML=L,q=R(),w=k("span"),F=H(fe),this.h()},l(p){t=y(p,"DIV",{style:!0});var D=S(t);e=y(D,"DIV",{class:!0});var B=S(e);l=y(B,"DIV",{class:!0,"data-svelte-h":!0}),K(l)!=="svelte-1dbgnme"&&(l.innerHTML=i),n=z(B),o=y(B,"SPAN",{class:!0});var O=S(o);V=j(O,s[5]),O.forEach(a),v=z(B),M=y(B,"DIV",{class:!0,"data-svelte-h":!0}),K(M)!=="svelte-f7330h"&&(M.innerHTML=L),q=z(B),w=y(B,"SPAN",{class:!0});var c=S(w);F=j(c,fe),c.forEach(a),B.forEach(a),D.forEach(a),this.h()},h(){_(l,"class","mb-2"),_(o,"class","bg-[#f9f2f4] p-[3px] rounded-sm text-red-500 [word-spacing:6px]"),_(M,"class","mb-1 mt-2 text-sm"),_(w,"class","bg-[#f9f2f4] p-[3px] rounded-sm text-red-500 text-sm [word-spacing:4px]"),_(e,"class","bg-[#d9edf7] border-2 border-[#bce8f1] text-[#31708f] rounded-md p-4 m-2"),de(t,"display","flex")},m(p,D){d(p,t,D),f(t,e),f(e,l),f(e,n),f(e,o),f(o,V),f(e,v),f(e,M),f(e,q),f(e,w),f(w,F)},p(p,D){D&32&&$(V,p[5])},d(p){p&&a(t)}}}function Me(s){let t,e,l,i,n,o,V,v,M,L,q,w,F,p,D,B,O,c,C,E,P,U,T,h;function N(u,b){return u[0]!=null?ke:me}let m=N(s),A=m(s),g=s[5].length>0&&re(s);return{c(){t=k("div"),e=k("button"),l=H("Water Budget"),n=R(),o=k("button"),V=H("Water Budget bias adjusted"),M=R(),L=k("button"),q=H("Kariba"),F=R(),p=k("button"),D=H("Vaal"),O=R(),c=k("div"),C=k("input"),E=R(),A.c(),P=R(),g&&g.c(),U=G(),this.h()},l(u){t=y(u,"DIV",{class:!0});var b=S(t);e=y(b,"BUTTON",{type:!0,class:!0});var W=S(e);l=j(W,"Water Budget"),W.forEach(a),n=z(b),o=y(b,"BUTTON",{type:!0,class:!0});var r=S(o);V=j(r,"Water Budget bias adjusted"),r.forEach(a),M=z(b),L=y(b,"BUTTON",{type:!0,class:!0});var I=S(L);q=j(I,"Kariba"),I.forEach(a),F=z(b),p=y(b,"BUTTON",{type:!0,class:!0});var X=S(p);D=j(X,"Vaal"),X.forEach(a),b.forEach(a),O=z(u),c=y(u,"DIV",{});var Y=S(c);C=y(Y,"INPUT",{class:!0,type:!0,placeholder:!0}),Y.forEach(a),E=z(u),A.l(u),P=z(u),g&&g.l(u),U=G(),this.h()},h(){_(e,"type","button"),_(e,"class",i="btn variant-filled-tertiary "+s[1]),_(o,"type","button"),_(o,"class",v="btn variant-filled-tertiary "+s[2]),_(L,"type","button"),_(L,"class",w="btn variant-filled-tertiary "+s[2]),_(p,"type","button"),_(p,"class",B="btn variant-filled-tertiary "+s[2]),_(t,"class","btn-group variant-ghost-primary [&>*+*]:border-red-500 h-6"),_(C,"class","input w-full mt-4"),_(C,"type","text"),_(C,"placeholder","Filter filenames...")},m(u,b){d(u,t,b),f(t,e),f(e,l),f(t,n),f(t,o),f(o,V),f(t,M),f(t,L),f(L,q),f(t,F),f(t,p),f(p,D),d(u,O,b),d(u,c,b),f(c,C),le(C,s[4]),d(u,E,b),A.m(u,b),d(u,P,b),g&&g.m(u,b),d(u,U,b),T||(h=[Q(e,"click",s[9]),Q(o,"click",s[10]),Q(L,"click",s[11]),Q(p,"click",s[12]),Q(C,"input",s[13])],T=!0)},p(u,[b]){b&2&&i!==(i="btn variant-filled-tertiary "+u[1])&&_(e,"class",i),b&4&&v!==(v="btn variant-filled-tertiary "+u[2])&&_(o,"class",v),b&4&&w!==(w="btn variant-filled-tertiary "+u[2])&&_(L,"class",w),b&4&&B!==(B="btn variant-filled-tertiary "+u[2])&&_(p,"class",B),b&16&&C.value!==u[4]&&le(C,u[4]),m===(m=N(u))&&A?A.p(u,b):(A.d(1),A=m(u),A&&(A.c(),A.m(P.parentNode,P))),u[5].length>0?g?g.p(u,b):(g=re(u),g.c(),g.m(U.parentNode,U)):g&&(g.d(1),g=null)},i:J,o:J,d(u){u&&(a(t),a(O),a(c),a(E),a(P),a(U)),A.d(u),g&&g.d(u),T=!1,ue(h)}}}let fe="-r -H -N --cut-dirs=2";function Le(s,t,e){let l,i,n=[],o="font-bold",V="",v="kariba";_e(()=>{ie(v).then(c=>{e(0,i=c),console.log(i)}).catch(c=>{console.log(c)})});let M="";function L(c){let C=parseInt(c.srcElement.value),E=c.srcElement.checked;n[C]=E}async function q(){const c=x+"/climate/select_temp_urls?type="+v;let C=[];for(let E=0;E<n.length;E++)n[E]&&C.push(i.content[E][0]);console.log("CHECKED: ",C);try{const E=await fetch(c,{method:"POST",body:JSON.stringify(C)});let P=[];if(!E.ok)throw new Error(`${E.status} ${E.statusText}`);P=await E.json(),console.log("RESULT: ",P),e(5,l=P["wget-command"])}catch(E){console.log(E)}}function w(c){c=="water_budget"?(e(2,V=""),e(1,o="font-bold"),e(3,v=c)):(c=="water_budget_bias"||c=="kariba"||c=="vaal")&&(e(1,o=""),e(2,V="font-bold"),e(3,v=c)),ie(v).then(C=>{e(0,i=C)}).catch(C=>{console.log(C)})}const F=()=>w("water_budget"),p=()=>w("water_budget_bias"),D=()=>w("kariba"),B=()=>w("vaal");function O(){M=this.value,e(4,M)}return e(5,l=""),[i,o,V,v,M,l,L,q,w,F,p,D,B,O]}class Re extends ve{constructor(t){super(),he(this,t,Le,Me,ce,{})}}export{Re as component};
